(function(){const ht=document.createElement("link").relList;if(ht&&ht.supports&&ht.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))mt(rt);new MutationObserver(rt=>{for(const ct of rt)if(ct.type==="childList")for(const p of ct.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&mt(p)}).observe(document,{childList:!0,subtree:!0});function ft(rt){const ct={};return rt.integrity&&(ct.integrity=rt.integrity),rt.referrerPolicy&&(ct.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?ct.credentials="include":rt.crossOrigin==="anonymous"?ct.credentials="omit":ct.credentials="same-origin",ct}function mt(rt){if(rt.ep)return;rt.ep=!0;const ct=ft(rt);fetch(rt.href,ct)}})();function Ot(ot){return ot&&ot.__esModule&&Object.prototype.hasOwnProperty.call(ot,"default")?ot.default:ot}var Mt={exports:{}},Dt=Mt.exports,Rt;function wt(){return Rt||(Rt=1,(function(ot,ht){(function(mt,rt){ot.exports=rt()})(Dt,()=>(()=>{var ft={50792:(p=>{var S=Object.prototype.hasOwnProperty,t="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(t=!1));function c(e,s,o){this.fn=e,this.context=s,this.once=o||!1}function h(e,s,o,i,a){if(typeof o!="function")throw new TypeError("The listener must be a function");var l=new c(o,i||e,a),f=t?t+s:s;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],l]:e._events[f].push(l):(e._events[f]=l,e._eventsCount++),e}function r(e,s){--e._eventsCount===0?e._events=new d:delete e._events[s]}function n(){this._events=new d,this._eventsCount=0}n.prototype.eventNames=function(){var s=[],o,i;if(this._eventsCount===0)return s;for(i in o=this._events)S.call(o,i)&&s.push(t?i.slice(1):i);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(o)):s},n.prototype.listeners=function(s){var o=t?t+s:s,i=this._events[o];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,l=i.length,f=new Array(l);a<l;a++)f[a]=i[a].fn;return f},n.prototype.listenerCount=function(s){var o=t?t+s:s,i=this._events[o];return i?i.fn?1:i.length:0},n.prototype.emit=function(s,o,i,a,l,f){var u=t?t+s:s;if(!this._events[u])return!1;var v=this._events[u],m=arguments.length,x,g;if(v.fn){switch(v.once&&this.removeListener(s,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,o),!0;case 3:return v.fn.call(v.context,o,i),!0;case 4:return v.fn.call(v.context,o,i,a),!0;case 5:return v.fn.call(v.context,o,i,a,l),!0;case 6:return v.fn.call(v.context,o,i,a,l,f),!0}for(g=1,x=new Array(m-1);g<m;g++)x[g-1]=arguments[g];v.fn.apply(v.context,x)}else{var y=v.length,T;for(g=0;g<y;g++)switch(v[g].once&&this.removeListener(s,v[g].fn,void 0,!0),m){case 1:v[g].fn.call(v[g].context);break;case 2:v[g].fn.call(v[g].context,o);break;case 3:v[g].fn.call(v[g].context,o,i);break;case 4:v[g].fn.call(v[g].context,o,i,a);break;default:if(!x)for(T=1,x=new Array(m-1);T<m;T++)x[T-1]=arguments[T];v[g].fn.apply(v[g].context,x)}}return!0},n.prototype.on=function(s,o,i){return h(this,s,o,i,!1)},n.prototype.once=function(s,o,i){return h(this,s,o,i,!0)},n.prototype.removeListener=function(s,o,i,a){var l=t?t+s:s;if(!this._events[l])return this;if(!o)return r(this,l),this;var f=this._events[l];if(f.fn)f.fn===o&&(!a||f.once)&&(!i||f.context===i)&&r(this,l);else{for(var u=0,v=[],m=f.length;u<m;u++)(f[u].fn!==o||a&&!f[u].once||i&&f[u].context!==i)&&v.push(f[u]);v.length?this._events[l]=v.length===1?v[0]:v:r(this,l)}return this},n.prototype.removeAllListeners=function(s){var o;return s?(o=t?t+s:s,this._events[o]&&r(this,o)):(this._events=new d,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=t,n.EventEmitter=n,p.exports=n}),11517:((p,S,t)=>{/**
 */var S=function(t,d,c,h){if(c===void 0&&(c=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var r=t.text,n=r.length,e=t.maxWidth,s=t.wordWrapCharCode,o=Number.MAX_VALUE,i=Number.MAX_VALUE,a=0,l=0,f=t.fontData.chars,u=t.fontData.lineHeight,v=t.letterSpacing,m=t.lineSpacing,x=0,g=0,y=0,T=null,C=t._align,E=0,M=0,P=t.fontSize/t.fontData.size,A=P*t.scaleX,R=P*t.scaleY,F=null,w=0,I=[],U=Number.MAX_VALUE,N=0,D=0,B=0,L,G,O,z=[],X=[],V=null,Y=function(dt,gt){for(var at=0,vt=0;vt<dt.length;vt++){var pt=dt.charCodeAt(vt),xt=gt.chars[pt];xt&&(at+=xt.xAdvance)}return at*A};if(e>0){O=r.split(`
`),h.wrappedText=r,n=r.length}var q=0;for(L=0;L<n;L++){if(y=r.charCodeAt(L),y===10){V!==null&&(z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),V=null),F=null,I[D]=B,B>N&&(N=B),B<U&&(U=B),D++,B=0,x=0,g=(u+m)*D;continue}if(T=f[y],!!T){if(E=x,M=g,F!==null){var _=T.kerning[w];E+=_!==void 0?_:0}o>E&&(o=E),i>M&&(i=M);var tt=E+T.xAdvance,Q=M+u;a<tt&&(a=tt),l<Q&&(l=Q);var j=T.xOffset+T.xAdvance+(_!==void 0?_:0);y===s?V!==null&&(z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),V=null):(V===null&&(V={word:"",i:q,x,y:g,w:0,h:u}),V.word=V.word.concat(r[L]),V.w+=j),X.push({i:q,idx:L,char:r[L],code:y,x:(T.xOffset+E)*P,y:(T.yOffset+g)*P,w:T.width*P,h:T.height*P,t:g*P,r:tt*P,b:u*P,line:D,glyph:T}),x+=T.xAdvance+v+(_!==void 0?_:0),F=T,w=y,B=tt*P,q++}}if(V!==null&&z.push({word:V.word,i:V.i,x:V.x*A,y:V.y*R,w:V.w*A,h:V.h*R}),I[D]=B,B>N&&(N=B),B<U&&(U=B),C>0)for(var k=0;k<X.length;k++){var et=X[k];if(C===1){var nt=(N-I[et.line])/2;et.x+=nt,et.r+=nt}else if(C===2){var lt=N-I[et.line];et.x+=lt,et.r+=lt}}var it=h.local,st=h.global;return O=h.lines,it.x=o*P,it.y=i*P,it.width=a*P,it.height=l*P,st.x=t.x-t._displayOriginX+o*A,st.y=t.y-t._displayOriginY+i*R,st.width=a*A,st.height=l*R,O.shortest=U,O.longest=N,O.lengths=I,d&&(it.x=Math.ceil(it.x),it.y=Math.ceil(it.y),it.width=Math.ceil(it.width),it.height=Math.ceil(it.height),st.x=Math.ceil(st.x),st.y=Math.ceil(st.y),st.width=Math.ceil(st.width),st.height=Math.ceil(st.height),O.shortest=Math.ceil(U),O.longest=Math.ceil(N)),c&&(t._displayOriginX=t.originX*it.width,t._displayOriginY=t.originY*it.height,st.x=t.x-t._displayOriginX*t.scaleX,st.y=t.y-t._displayOriginY*t.scaleY,d&&(st.x=Math.ceil(st.x),st.y=Math.ceil(st.y))),h.words=z,h.characters=X,h.lines.height=u,h.scale=P,h.scaleX=t.scaleX,h.scaleY=t.scaleY,h};p.exports=S}),61327:((p,S,t)=>{/**
 */var d=t(91296),c=t(61340),h=t(70554),r=new c,n=function(e,s,o,i){var a=s.text,l=a.length;if(l!==0){o.addToRenderList(s);var f=e.pipelines.set(s.pipeline,s),u=d(s,o,i);e.pipelines.preBatch(s);var v=u.sprite,m=u.calc,x=r,g=s.cropWidth>0||s.cropHeight>0;g&&(f.flush(),e.pushScissor(m.tx,m.ty,s.cropWidth*m.scaleX,s.cropHeight*m.scaleY));var y=s.frame,T=y.glTexture,C=s.tintFill,E=h.getTintAppendFloatAlpha(s.tintTopLeft,o.alpha*s._alphaTL),M=h.getTintAppendFloatAlpha(s.tintTopRight,o.alpha*s._alphaTR),P=h.getTintAppendFloatAlpha(s.tintBottomLeft,o.alpha*s._alphaBL),A=h.getTintAppendFloatAlpha(s.tintBottomRight,o.alpha*s._alphaBR),R=f.setGameObject(s),F=0,w=0,I=0,U=0,N=s.letterSpacing,D,B=0,L=0,G,O=s.scrollX,z=s.scrollY,X=s.fontData,V=X.chars,Y=X.lineHeight,W=s.fontSize/X.size,H=0,K=s._align,b=0,J=0,$=s.getTextBounds(!1);s.maxWidth>0&&(a=$.wrappedText,l=a.length);var Z=s._bounds.lines;K===1?J=(Z.longest-Z.lengths[0])/2:K===2&&(J=Z.longest-Z.lengths[0]);for(var q=o.roundPixels,_=s.displayCallback,tt=s.callbackData,Q=0;Q<l;Q++){if(I=a.charCodeAt(Q),I===10){b++,K===1?J=(Z.longest-Z.lengths[b])/2:K===2&&(J=Z.longest-Z.lengths[b]),F=0,w+=Y,G=null;continue}if(D=V[I],!!D){B=D.width,L=D.height;var j=D.xOffset+F-O,k=D.yOffset+w-z;if(G!==null){var et=D.kerning[U]||0;j+=et,F+=et}if(F+=D.xAdvance+N,G=D,U=I,!(B===0||L===0||I===32)){if(W=s.fontSize/s.fontData.size,H=0,_){tt.color=0,tt.tint.topLeft=E,tt.tint.topRight=M,tt.tint.bottomLeft=P,tt.tint.bottomRight=A,tt.index=Q,tt.charCode=I,tt.x=j,tt.y=k,tt.scale=W,tt.rotation=H,tt.data=D.data;var nt=_(tt);j=nt.x,k=nt.y,W=nt.scale,H=nt.rotation,nt.color?(E=nt.color,M=nt.color,P=nt.color,A=nt.color):(E=nt.tint.topLeft,M=nt.tint.topRight,P=nt.tint.bottomLeft,A=nt.tint.bottomRight),E=h.getTintAppendFloatAlpha(E,o.alpha*s._alphaTL),M=h.getTintAppendFloatAlpha(M,o.alpha*s._alphaTR),P=h.getTintAppendFloatAlpha(P,o.alpha*s._alphaBL),A=h.getTintAppendFloatAlpha(A,o.alpha*s._alphaBR)}j*=W,k*=W,j-=s.displayOriginX,k-=s.displayOriginY,j+=J,x.applyITRS(j,k,H,W,W),m.multiply(x,v);var lt=D.u0,it=D.v0,st=D.u1,dt=D.v1,gt=B,at=L,vt=v.e,pt=v.f,xt=at*v.c+v.e,Tt=at*v.d+v.f,St=gt*v.a+at*v.c+v.e,Ct=gt*v.b+at*v.d+v.f,Et=gt*v.a+v.e,Pt=gt*v.b+v.f;q&&(vt=Math.round(vt),pt=Math.round(pt),xt=Math.round(xt),Tt=Math.round(Tt),St=Math.round(St),Ct=Math.round(Ct),Et=Math.round(Et),Pt=Math.round(Pt)),f.shouldFlush(6)&&(f.flush(),R=f.setGameObject(s)),f.batchQuad(s,vt,pt,xt,Tt,St,Ct,Et,Pt,lt,it,st,dt,E,M,P,A,C,T,R)}}}g&&(f.flush(),e.popScissor()),e.pipelines.postBatch(s)}};p.exports=n}),22186:((p,S,t)=>{/**
 */var d=t(83997),c=t(95540),h=t(37867),r=t(25836),n=t(39318),e=new r,s=new r,o=new h,i=function(a){var l=c(a,"mesh"),f=c(a,"texture",null),u=c(a,"frame"),v=c(a,"width",1),m=c(a,"height",v),x=c(a,"widthSegments",1),g=c(a,"heightSegments",x),y=c(a,"x",0),T=c(a,"y",0),C=c(a,"z",0),E=c(a,"rotateX",0),M=c(a,"rotateY",0),P=c(a,"rotateZ",0),A=c(a,"zIsUp",!0),R=c(a,"isOrtho",l?l.dirtyCache[11]:!1),F=c(a,"colors",[16777215]),w=c(a,"alphas",[1]),I=c(a,"tile",!1),U=c(a,"flipY",!1),N=c(a,"width",null),D={faces:[],verts:[]};e.set(y,T,C),s.set(E,M,P),o.fromRotationXYTranslation(s,e,A);var B;if(!f&&l)f=l.texture,u||(B=l.frame);else if(l&&typeof f=="string")f=l.scene.sys.textures.get(f);else if(!f)return D;B||(B=f.get(u)),!N&&R&&f&&l&&(v=B.width/l.height,m=B.height/l.height);var L=v/2,G=m/2,O=Math.floor(x),z=Math.floor(g),X=O+1,V=z+1,Y=v/O,W=m/z,H=[],K=[],b,J,$=0,Z=1,q=0,_=1;B&&($=B.u0,Z=B.u1,U?(q=B.v1,_=B.v0):(q=B.v0,_=B.v1));var tt=Z-$,Q=_-q;for(J=0;J<V;J++){var j=J*W-G;for(b=0;b<X;b++){var k=b*Y-L;K.push(k,-j);var et=$+tt*(b/O),nt=q+Q*(J/z);H.push(et,nt)}}Array.isArray(F)||(F=[F]),Array.isArray(w)||(w=[w]);var lt=0,it=0;for(J=0;J<z;J++)for(b=0;b<O;b++){var st=(b+X*J)*2,dt=(b+X*(J+1))*2,gt=(b+1+X*(J+1))*2,at=(b+1+X*J)*2,vt=F[it],pt=w[lt],xt=new n(K[st],K[st+1],0,H[st],H[st+1],vt,pt).transformMat4(o),Tt=new n(K[dt],K[dt+1],0,H[dt],H[dt+1],vt,pt).transformMat4(o),St=new n(K[at],K[at+1],0,H[at],H[at+1],vt,pt).transformMat4(o),Ct=new n(K[dt],K[dt+1],0,H[dt],H[dt+1],vt,pt).transformMat4(o),Et=new n(K[gt],K[gt+1],0,H[gt],H[gt+1],vt,pt).transformMat4(o),Pt=new n(K[at],K[at+1],0,H[at],H[at+1],vt,pt).transformMat4(o);I&&(xt.setUVs($,_),Tt.setUVs($,q),St.setUVs(Z,_),Ct.setUVs($,q),Et.setUVs(Z,q),Pt.setUVs(Z,_)),it++,it===F.length&&(it=0),lt++,lt===w.length&&(lt=0),D.verts.push(xt,Tt,St,Ct,Et,Pt),D.faces.push(new d(xt,Tt,St),new d(Ct,Et,Pt))}return l&&(l.faces=l.faces.concat(D.faces),l.vertices=l.vertices.concat(D.verts)),D};p.exports=i}),34684:((p,S,t)=>{/**
 */var d=t(55495),c=t(37742),h=t(45319),r=t(83419),n=t(79342),e=t(37747),s=t(20339),o=t(52816),i=t(50792),a=t(63012),l=t(43855),f=t(5470),u=t(94977),v=t(64897),m=t(45170),x=t(96523),g=t(35154),y=t(36383),T=t(25774),C=t(96602),E=t(87841),M=t(59542),P=t(40012),A=t(14087),R=t(89936),F=t(35072),w=t(72624),I=t(2483),U=t(61340),N=t(26099),D=t(15994),B=new r({Extends:i,initialize:function(G,O){i.call(this),this.scene=G,this.bodies=new F,this.staticBodies=new F,this.pendingDestroy=new F,this.colliders=new T,this.gravity=new N(g(O,"gravity.x",0),g(O,"gravity.y",0)),this.bounds=new E(g(O,"x",0),g(O,"y",0),g(O,"width",G.sys.scale.width),g(O,"height",G.sys.scale.height)),this.checkCollision={up:g(O,"checkCollision.up",!0),down:g(O,"checkCollision.down",!0),left:g(O,"checkCollision.left",!0),right:g(O,"checkCollision.right",!0)},this.fps=g(O,"fps",60),this.fixedStep=g(O,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=g(O,"timeScale",1),this.OVERLAP_BIAS=g(O,"overlapBias",4),this.TILE_BIAS=g(O,"tileBias",16),this.forceX=g(O,"forceX",!1),this.isPaused=g(O,"isPaused",!1),this._total=0,this.drawDebug=g(O,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:g(O,"debugShowBody",!0),debugShowStaticBody:g(O,"debugShowStaticBody",!0),debugShowVelocity:g(O,"debugShowVelocity",!0),bodyDebugColor:g(O,"debugBodyColor",16711935),staticBodyDebugColor:g(O,"debugStaticBodyColor",255),velocityDebugColor:g(O,"debugVelocityColor",65280)},this.maxEntries=g(O,"maxEntries",16),this.useTree=g(O,"useTree",!0),this.tree=new M(this.maxEntries),this.staticTree=new M(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(L,G){G===void 0&&(G=e.DYNAMIC_BODY),Array.isArray(L)||(L=[L]);for(var O=0;O<L.length;O++){var z=L[O];if(z.isParent)for(var X=z.getChildren(),V=0;V<X.length;V++){var Y=X[V];Y.isParent?this.enable(Y,G):this.enableBody(Y,G)}else this.enableBody(z,G)}},enableBody:function(L,G){return G===void 0&&(G=e.DYNAMIC_BODY),L.hasTransformComponent&&(L.body||(G===e.DYNAMIC_BODY?L.body=new c(this,L):G===e.STATIC_BODY&&(L.body=new w(this,L))),this.add(L.body)),L},add:function(L){return L.physicsType===e.DYNAMIC_BODY?this.bodies.set(L):L.physicsType===e.STATIC_BODY&&(this.staticBodies.set(L),this.staticTree.insert(L)),L.enable=!0,L},disable:function(L){Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++){var O=L[G];if(O.isParent)for(var z=O.getChildren(),X=0;X<z.length;X++){var V=z[X];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(O.body)}},disableBody:function(L){this.remove(L),L.enable=!1},remove:function(L){L.physicsType===e.DYNAMIC_BODY?(this.tree.remove(L),this.bodies.delete(L)):L.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(L),this.staticTree.remove(L))},createDebugGraphic:function(){var L=this.scene.sys.add.graphics({x:0,y:0});return L.setDepth(Number.MAX_VALUE),this.debugGraphic=L,this.drawDebug=!0,L},setBounds:function(L,G,O,z,X,V,Y,W){return this.bounds.setTo(L,G,O,z),X!==void 0&&this.setBoundsCollision(X,V,Y,W),this},setBoundsCollision:function(L,G,O,z){return L===void 0&&(L=!0),G===void 0&&(G=!0),O===void 0&&(O=!0),z===void 0&&(z=!0),this.checkCollision.left=L,this.checkCollision.right=G,this.checkCollision.up=O,this.checkCollision.down=z,this},pause:function(){return this.isPaused=!0,this.emit(a.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(a.RESUME),this},addCollider:function(L,G,O,z,X){O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O);var V=new n(this,!1,L,G,O,z,X);return this.colliders.add(V),V},addOverlap:function(L,G,O,z,X){O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O);var V=new n(this,!0,L,G,O,z,X);return this.colliders.add(V),V},removeCollider:function(L){return this.colliders.remove(L),this},setFPS:function(L){return this.fps=L,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(L,G){if(!(this.isPaused||this.bodies.size===0)){var O,z=this._frameTime,X=this._frameTimeMS*this.timeScale;this._elapsed+=G;var V,Y=this.bodies.entries,W=this._elapsed>=X;for(this.fixedStep||(z=G*.001,W=!0,this._elapsed=0),O=0;O<Y.length;O++)V=Y[O],V.enable&&V.preUpdate(W,z);if(W){this._elapsed-=X,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Y));var H=this.colliders.update();for(O=0;O<H.length;O++){var K=H[O];K.active&&K.update()}this.emit(a.WORLD_STEP,z)}for(;this._elapsed>=X;)this._elapsed-=X,this.step(z)}},step:function(L){var G,O,z=this.bodies.entries,X=z.length;for(G=0;G<X;G++)O=z[G],O.enable&&O.update(L);this.useTree&&(this.tree.clear(),this.tree.load(z));var V=this.colliders.update();for(G=0;G<V.length;G++){var Y=V[G];Y.active&&Y.update()}this.emit(a.WORLD_STEP,L),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var L,G,O=this.bodies.entries,z=O.length,X=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,L=0;L<z;L++)G=O[L],G.enable&&G.postUpdate();if(this.drawDebug){var Y=this.debugGraphic;for(Y.clear(),L=0;L<z;L++)G=O[L],G.willDrawDebug()&&G.drawDebug(Y);for(O=V.entries,z=O.length,L=0;L<z;L++)G=O[L],G.willDrawDebug()&&G.drawDebug(Y)}var W=this.pendingDestroy;if(W.size>0){var H=this.tree,K=this.staticTree;for(O=W.entries,z=O.length,L=0;L<z;L++)G=O[L],G.physicsType===e.DYNAMIC_BODY?(H.remove(G),X.delete(G)):G.physicsType===e.STATIC_BODY&&(K.remove(G),V.delete(G)),G.world=void 0,G.gameObject=void 0;W.clear()}},updateMotion:function(L,G){L.allowRotation&&this.computeAngularVelocity(L,G),this.computeVelocity(L,G)},computeAngularVelocity:function(L,G){var O=L.angularVelocity,z=L.angularAcceleration,X=L.angularDrag,V=L.maxAngular;z?O+=z*G:L.allowDrag&&X&&(X*=G,f(O-X,0,.1)?O-=X:u(O+X,0,.1)?O+=X:O=0),O=h(O,-V,V);var Y=O-L.angularVelocity;L.angularVelocity+=Y,L.rotation+=L.angularVelocity*G},computeVelocity:function(L,G){var O=L.velocity.x,z=L.acceleration.x,X=L.drag.x,V=L.maxVelocity.x,Y=L.velocity.y,W=L.acceleration.y,H=L.drag.y,K=L.maxVelocity.y,b=L.speed,J=L.maxSpeed,$=L.allowDrag,Z=L.useDamping;L.allowGravity&&(O+=(this.gravity.x+L.gravity.x)*G,Y+=(this.gravity.y+L.gravity.y)*G),z?O+=z*G:$&&X&&(Z?(X=Math.pow(X,G),O*=X,b=Math.sqrt(O*O+Y*Y),l(b,0,.001)&&(O=0)):(X*=G,f(O-X,0,.01)?O-=X:u(O+X,0,.01)?O+=X:O=0)),W?Y+=W*G:$&&H&&(Z?(H=Math.pow(H,G),Y*=H,b=Math.sqrt(O*O+Y*Y),l(b,0,.001)&&(Y=0)):(H*=G,f(Y-H,0,.01)?Y-=H:u(Y+H,0,.01)?Y+=H:Y=0)),O=h(O,-V,V),Y=h(Y,-K,K),L.velocity.set(O,Y),J>-1&&L.velocity.length()>J&&(L.velocity.normalize().scale(J),b=J),L.speed=b},separate:function(L,G,O,z,X){var V,Y,W=!1,H=!0;if(!L.enable||!G.enable||L.checkCollision.none||G.checkCollision.none||!this.intersects(L,G)||(L.collisionMask&G.collisionCategory)===0||(G.collisionMask&L.collisionCategory)===0||O&&O.call(z,L.gameObject||L,G.gameObject||G)===!1)return W;if(L.isCircle||G.isCircle){var K=this.separateCircle(L,G,X);K.result?(W=!0,H=!1):(V=K.x,Y=K.y,H=!0)}if(H){var b=!1,J=!1,$=this.OVERLAP_BIAS;X?(b=A(L,G,X,$,V),J=R(L,G,X,$,Y)):this.forceX||Math.abs(this.gravity.y+L.gravity.y)<Math.abs(this.gravity.x+L.gravity.x)?(b=A(L,G,X,$,V),this.intersects(L,G)&&(J=R(L,G,X,$,Y))):(J=R(L,G,X,$,Y),this.intersects(L,G)&&(b=A(L,G,X,$,V))),W=b||J}return W&&(X?(L.onOverlap||G.onOverlap)&&this.emit(a.OVERLAP,L.gameObject,G.gameObject,L,G):(L.onCollide||G.onCollide)&&this.emit(a.COLLIDE,L.gameObject,G.gameObject,L,G)),W},separateCircle:function(L,G,O){v(L,G,!1,0),m(L,G,!1,0);var z=L.isCircle,X=G.isCircle,V=L.center,Y=G.center,W=L.immovable,H=G.immovable,K=L.velocity,b=G.velocity,J=0,$=!0;if(z!==X){$=!1;var Z=V.x,q=V.y,_=L.halfWidth,tt=G.position.x,Q=G.position.y,j=G.right,k=G.bottom;X&&(Z=Y.x,q=Y.y,_=G.halfWidth,tt=L.position.x,Q=L.position.y,j=L.right,k=L.bottom),q<Q?Z<tt?J=s(Z,q,tt,Q)-_:Z>j&&(J=s(Z,q,j,Q)-_):q>k&&(Z<tt?J=s(Z,q,tt,k)-_:Z>j&&(J=s(Z,q,j,k)-_)),J*=-1}else J=L.halfWidth+G.halfWidth-o(V,Y);L.overlapR=J,G.overlapR=J;var et=d(V,Y),nt=(J+y.EPSILON)*Math.cos(et),lt=(J+y.EPSILON)*Math.sin(et),it={overlap:J,result:!1,x:nt,y:lt};if(O&&(!$||$&&J!==0))return it.result=!0,it;if(!$&&J===0||W&&H||L.customSeparateX||G.customSeparateX)return it.x=void 0,it.y=void 0,it;var st=!L.pushable&&!G.pushable;if($){var dt=V.x-Y.x,gt=V.y-Y.y,at=Math.sqrt(Math.pow(dt,2)+Math.pow(gt,2)),vt=(Y.x-V.x)/at||0,pt=(Y.y-V.y)/at||0,xt=2*(K.x*vt+K.y*pt-b.x*vt-b.y*pt)/(L.mass+G.mass);(W||H||!L.pushable||!G.pushable)&&(xt*=2),!W&&L.pushable&&(K.x=K.x-xt/L.mass*vt,K.y=K.y-xt/L.mass*pt,K.multiply(L.bounce)),!H&&G.pushable&&(b.x=b.x+xt/G.mass*vt,b.y=b.y+xt/G.mass*pt,b.multiply(G.bounce)),!W&&!H&&(nt*=.5,lt*=.5),(!W||L.pushable||st)&&(L.x-=nt,L.y-=lt,L.updateCenter()),(!H||G.pushable||st)&&(G.x+=nt,G.y+=lt,G.updateCenter()),it.result=!0}else!W&&(L.pushable||st)&&(L.x-=nt,L.y-=lt,L.updateCenter()),!H&&(G.pushable||st)&&(G.x+=nt,G.y+=lt,G.updateCenter()),it.x=void 0,it.y=void 0;return it},intersects:function(L,G){return L===G?!1:!L.isCircle&&!G.isCircle?!(L.right<=G.left||L.bottom<=G.top||L.left>=G.right||L.top>=G.bottom):L.isCircle?G.isCircle?o(L.center,G.center)<=L.halfWidth+G.halfWidth:this.circleBodyIntersects(L,G):this.circleBodyIntersects(G,L)},circleBodyIntersects:function(L,G){var O=h(L.center.x,G.left,G.right),z=h(L.center.y,G.top,G.bottom),X=(L.center.x-O)*(L.center.x-O),V=(L.center.y-z)*(L.center.y-z);return X+V<=L.halfWidth*L.halfWidth},overlap:function(L,G,O,z,X){return O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O),this.collideObjects(L,G,O,z,X,!0)},collide:function(L,G,O,z,X){return O===void 0&&(O=null),z===void 0&&(z=null),X===void 0&&(X=O),this.collideObjects(L,G,O,z,X,!1)},collideObjects:function(L,G,O,z,X,V){var Y,W;L.isParent&&(L.physicsType===void 0||G===void 0||L===G)&&(L=L.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var H=Array.isArray(L),K=Array.isArray(G);if(this._total=0,!H&&!K)this.collideHandler(L,G,O,z,X,V);else if(!H&&K)for(Y=0;Y<G.length;Y++)this.collideHandler(L,G[Y],O,z,X,V);else if(H&&!K)if(G)for(Y=0;Y<L.length;Y++)this.collideHandler(L[Y],G,O,z,X,V);else for(Y=0;Y<L.length;Y++){var b=L[Y];for(W=Y+1;W<L.length;W++)Y!==W&&this.collideHandler(b,L[W],O,z,X,V)}else for(Y=0;Y<L.length;Y++)for(W=0;W<G.length;W++)this.collideHandler(L[Y],G[W],O,z,X,V);return this._total>0},collideHandler:function(L,G,O,z,X,V){if(G===void 0&&L.isParent)return this.collideGroupVsGroup(L,L,O,z,X,V);if(!L||!G)return!1;if(L.body||L.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(L,G,O,z,X,V);if(G.isParent)return this.collideSpriteVsGroup(L,G,O,z,X,V);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(L,G,O,z,X,V)}else if(L.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,L,O,z,X,V);if(G.isParent)return this.collideGroupVsGroup(L,G,O,z,X,V);if(G.isTilemap)return this.collideGroupVsTilemapLayer(L,G,O,z,X,V)}else if(L.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,L,O,z,X,V);if(G.isParent)return this.collideGroupVsTilemapLayer(G,L,O,z,X,V)}},canCollide:function(L,G){return L&&G&&(L.collisionMask&G.collisionCategory)!==0&&(G.collisionMask&L.collisionCategory)!==0},collideSpriteVsSprite:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body,W=G.isBody?G:G.body;return this.canCollide(Y,W)?(this.separate(Y,W,z,X,V)&&(O&&O.call(X,L,G),this._total++),!0):!1},collideSpriteVsGroup:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body;if(!(G.getLength()===0||!Y||!Y.enable||Y.checkCollision.none||!this.canCollide(Y,G))){var W,H,K;if(this.useTree||G.physicsType===e.STATIC_BODY){var b=this.treeMinMax;b.minX=Y.left,b.minY=Y.top,b.maxX=Y.right,b.maxY=Y.bottom;var J=G.physicsType===e.DYNAMIC_BODY?this.tree.search(b):this.staticTree.search(b);for(H=J.length,W=0;W<H;W++)K=J[W],!(Y===K||!K.enable||K.checkCollision.none||!G.contains(K.gameObject))&&this.separate(Y,K,z,X,V)&&(O&&O.call(X,Y.gameObject,K.gameObject),this._total++)}else{var $=G.getChildren(),Z=G.children.entries.indexOf(L);for(H=$.length,W=0;W<H;W++)K=$[W].body,!(!K||W===Z||!K.enable)&&this.separate(Y,K,z,X,V)&&(O&&O.call(X,Y.gameObject,K.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(L,G,O,z,X,V){if(!this.canCollide(L,G))return!1;var Y=L.getChildren();if(Y.length===0)return!1;for(var W=!1,H=0;H<Y.length;H++)(Y[H].body||Y[H].isBody)&&this.collideSpriteVsTilemapLayer(Y[H],G,O,z,X,V)&&(W=!0);return W},collideTiles:function(L,G,O,z,X){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,O,z,X,!1,!1)},overlapTiles:function(L,G,O,z,X){return G.length===0||L.body&&!L.body.enable||L.isBody&&!L.enable?!1:this.collideSpriteVsTilesHandler(L,G,O,z,X,!0,!1)},collideSpriteVsTilemapLayer:function(L,G,O,z,X,V){var Y=L.isBody?L:L.body;if(!Y.enable||Y.checkCollision.none||!this.canCollide(Y,G))return!1;var W=G.layer,H=Y.x-W.tileWidth*G.scaleX,K=Y.y-W.tileHeight*G.scaleY,b=Y.width+W.tileWidth*G.scaleX,J=Y.height+W.tileHeight*G.scaleY,$=V?null:this.tileFilterOptions,Z=x(H,K,b,J,$,G.scene.cameras.main,G.layer);return Z.length===0?!1:this.collideSpriteVsTilesHandler(L,Z,O,z,X,V,!0)},collideSpriteVsTilesHandler:function(L,G,O,z,X,V,Y){for(var W=L.isBody?L:L.body,H,K={left:0,right:0,top:0,bottom:0},b,J=!1,$=0;$<G.length;$++){H=G[$],b=H.tilemapLayer;var Z=b.tileToWorldXY(H.x,H.y);K.left=Z.x,K.top=Z.y,K.right=K.left+H.width*b.scaleX,K.bottom=K.top+H.height*b.scaleY,I(K,W)&&(!z||z.call(X,L,H))&&C(H,L)&&(V||P($,W,H,K,b,this.TILE_BIAS,Y))&&(this._total++,J=!0,O&&O.call(X,L,H),V&&W.onOverlap?this.emit(a.TILE_OVERLAP,L,H,W):W.onCollide&&this.emit(a.TILE_COLLIDE,L,H,W))}return J},collideGroupVsGroup:function(L,G,O,z,X,V){if(!(L.getLength()===0||G.getLength()===0||!this.canCollide(L,G)))for(var Y=L.getChildren(),W=0;W<Y.length;W++)this.collideSpriteVsGroup(Y[W],G,O,z,X,V)},wrap:function(L,G){L.body?this.wrapObject(L,G):L.getChildren?this.wrapArray(L.getChildren(),G):Array.isArray(L)?this.wrapArray(L,G):this.wrapObject(L,G)},wrapArray:function(L,G){for(var O=0;O<L.length;O++)this.wrapObject(L[O],G)},wrapObject:function(L,G){G===void 0&&(G=0),L.x=D(L.x,this.bounds.left-G,this.bounds.right+G),L.y=D(L.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});p.exports=B}),1093:(p=>{/**
 */p.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}}),22562:((p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(31725),r=t(53614),n=t(53402),e=t(15647),s=t(66615);(function(){d._timeCorrection=!0,d._inertiaScale=4,d._nextCollidingGroupId=1,d._nextNonCollidingGroupId=-1,d._nextCategory=1,d._baseDelta=16.666666666666668,d.create=function(i){var a={id:n.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:i.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=c.centre(i.vertices):i.hasOwnProperty("vertices")||(a.vertices=c.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var l=n.extend(a,i);return o(l,i),l.setOnCollideWith=function(f,u){return u?this.onCollideWith[f.id]=u:delete this.onCollideWith[f.id],this},l},d.nextGroup=function(i){return i?d._nextNonCollidingGroupId--:d._nextCollidingGroupId++},d.nextCategory=function(){return d._nextCategory=d._nextCategory<<1,d._nextCategory};var o=function(i,a){if(a=a||{},d.set(i,{bounds:i.bounds||e.create(i.vertices),positionPrev:i.positionPrev||h.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),c.rotate(i.vertices,i.angle,i.position),s.rotate(i.axes,i.angle),e.update(i.bounds,i.vertices,i.velocity),d.set(i,{axes:a.axes||i.axes,area:a.area||i.area,mass:a.mass||i.mass,inertia:a.inertia||i.inertia}),i.parts.length===1){var l=i.bounds,f=i.centerOfMass,u=i.centerOffset,v=l.max.x-l.min.x,m=l.max.y-l.min.y;f.x=-(l.min.x-i.position.x)/v,f.y=-(l.min.y-i.position.y)/m,u.x=v*f.x,u.y=m*f.y}};d.set=function(i,a,l){var f;typeof a=="string"&&(f=a,a={},a[f]=l);for(f in a)if(Object.prototype.hasOwnProperty.call(a,f))switch(l=a[f],f){case"isStatic":d.setStatic(i,l);break;case"isSleeping":r.set(i,l);break;case"mass":d.setMass(i,l);break;case"density":d.setDensity(i,l);break;case"inertia":d.setInertia(i,l);break;case"vertices":d.setVertices(i,l);break;case"position":d.setPosition(i,l);break;case"angle":d.setAngle(i,l);break;case"velocity":d.setVelocity(i,l);break;case"angularVelocity":d.setAngularVelocity(i,l);break;case"speed":d.setSpeed(i,l);break;case"angularSpeed":d.setAngularSpeed(i,l);break;case"parts":d.setParts(i,l);break;case"centre":d.setCentre(i,l);break;default:i[f]=l}},d.setStatic=function(i,a){for(var l=0;l<i.parts.length;l++){var f=i.parts[l];a?(f.isStatic||(f._original={restitution:f.restitution,friction:f.friction,mass:f.mass,inertia:f.inertia,density:f.density,inverseMass:f.inverseMass,inverseInertia:f.inverseInertia}),f.restitution=0,f.friction=1,f.mass=f.inertia=f.density=1/0,f.inverseMass=f.inverseInertia=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.angularVelocity=0,f.speed=0,f.angularSpeed=0,f.motion=0):f._original&&(f.restitution=f._original.restitution,f.friction=f._original.friction,f.mass=f._original.mass,f.inertia=f._original.inertia,f.density=f._original.density,f.inverseMass=f._original.inverseMass,f.inverseInertia=f._original.inverseInertia,f._original=null),f.isStatic=a}},d.setMass=function(i,a){var l=i.inertia/(i.mass/6);i.inertia=l*(a/6),i.inverseInertia=1/i.inertia,i.mass=a,i.inverseMass=1/i.mass,i.density=i.mass/i.area},d.setDensity=function(i,a){d.setMass(i,a*i.area),i.density=a},d.setInertia=function(i,a){i.inertia=a,i.inverseInertia=1/i.inertia},d.setVertices=function(i,a){a[0].body===i?i.vertices=a:i.vertices=c.create(a,i),i.axes=s.fromVertices(i.vertices),i.area=c.area(i.vertices),d.setMass(i,i.density*i.area);var l=c.centre(i.vertices);c.translate(i.vertices,l,-1),d.setInertia(i,d._inertiaScale*c.inertia(i.vertices,i.mass)),c.translate(i.vertices,i.position),e.update(i.bounds,i.vertices,i.velocity)},d.setParts=function(i,a,l){var f;for(a=a.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,f=0;f<a.length;f++){var u=a[f];u!==i&&(u.parent=i,i.parts.push(u))}if(i.parts.length!==1){if(l=typeof l<"u"?l:!0,l){var v=[];for(f=0;f<a.length;f++)v=v.concat(a[f].vertices);c.clockwiseSort(v);var m=c.hull(v),x=c.centre(m);d.setVertices(i,m),c.translate(i.vertices,x)}var g=d._totalProperties(i),y=g.centre.x,T=g.centre.y,C=i.bounds,E=i.centerOfMass,M=i.centerOffset;e.update(C,i.vertices,i.velocity),E.x=-(C.min.x-y)/(C.max.x-C.min.x),E.y=-(C.min.y-T)/(C.max.y-C.min.y),M.x=y,M.y=T,i.area=g.area,i.parent=i,i.position.x=y,i.position.y=T,i.positionPrev.x=y,i.positionPrev.y=T,d.setMass(i,g.mass),d.setInertia(i,g.inertia),d.setPosition(i,g.centre)}},d.setCentre=function(i,a,l){l?(i.positionPrev.x+=a.x,i.positionPrev.y+=a.y,i.position.x+=a.x,i.position.y+=a.y):(i.positionPrev.x=a.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=a.y-(i.position.y-i.positionPrev.y),i.position.x=a.x,i.position.y=a.y)},d.setPosition=function(i,a,l){var f=h.sub(a,i.position);l?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=f.x,i.velocity.y=f.y,i.speed=h.magnitude(f)):(i.positionPrev.x+=f.x,i.positionPrev.y+=f.y);for(var u=0;u<i.parts.length;u++){var v=i.parts[u];v.position.x+=f.x,v.position.y+=f.y,c.translate(v.vertices,f),e.update(v.bounds,v.vertices,i.velocity)}},d.setAngle=function(i,a,l){var f=a-i.angle;l?(i.anglePrev=i.angle,i.angularVelocity=f,i.angularSpeed=Math.abs(f)):i.anglePrev+=f;for(var u=0;u<i.parts.length;u++){var v=i.parts[u];v.angle+=f,c.rotate(v.vertices,f,i.position),s.rotate(v.axes,f),e.update(v.bounds,v.vertices,i.velocity),u>0&&h.rotateAbout(v.position,f,i.position,v.position)}},d.setVelocity=function(i,a){var l=i.deltaTime/d._baseDelta;i.positionPrev.x=i.position.x-a.x*l,i.positionPrev.y=i.position.y-a.y*l,i.velocity.x=(i.position.x-i.positionPrev.x)/l,i.velocity.y=(i.position.y-i.positionPrev.y)/l,i.speed=h.magnitude(i.velocity)},d.getVelocity=function(i){var a=d._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*a,y:(i.position.y-i.positionPrev.y)*a}},d.getSpeed=function(i){return h.magnitude(d.getVelocity(i))},d.setSpeed=function(i,a){d.setVelocity(i,h.mult(h.normalise(d.getVelocity(i)),a))},d.setAngularVelocity=function(i,a){var l=i.deltaTime/d._baseDelta;i.anglePrev=i.angle-a*l,i.angularVelocity=(i.angle-i.anglePrev)/l,i.angularSpeed=Math.abs(i.angularVelocity)},d.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*d._baseDelta/i.deltaTime},d.getAngularSpeed=function(i){return Math.abs(d.getAngularVelocity(i))},d.setAngularSpeed=function(i,a){d.setAngularVelocity(i,n.sign(d.getAngularVelocity(i))*a)},d.translate=function(i,a,l){d.setPosition(i,h.add(i.position,a),l)},d.rotate=function(i,a,l,f){if(!l)d.setAngle(i,i.angle+a,f);else{var u=Math.cos(a),v=Math.sin(a),m=i.position.x-l.x,x=i.position.y-l.y;d.setPosition(i,{x:l.x+(m*u-x*v),y:l.y+(m*v+x*u)},f),d.setAngle(i,i.angle+a,f)}},d.scale=function(i,a,l,f){var u=0,v=0;f=f||i.position;for(var m=i.inertia===1/0,x=0;x<i.parts.length;x++){var g=i.parts[x];g.scale.x=a,g.scale.y=l,c.scale(g.vertices,a,l,f),g.axes=s.fromVertices(g.vertices),g.area=c.area(g.vertices),d.setMass(g,i.density*g.area),c.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),d.setInertia(g,d._inertiaScale*c.inertia(g.vertices,g.mass)),c.translate(g.vertices,{x:g.position.x,y:g.position.y}),x>0&&(u+=g.area,v+=g.inertia),g.position.x=f.x+(g.position.x-f.x)*a,g.position.y=f.y+(g.position.y-f.y)*l,e.update(g.bounds,g.vertices,i.velocity)}i.parts.length>1&&(i.area=u,i.isStatic||(d.setMass(i,i.density*u),d.setInertia(i,v))),i.circleRadius&&(a===l?i.circleRadius*=a:i.circleRadius=null),m&&d.setInertia(i,1/0)},d.update=function(i,a){a=(typeof a<"u"?a:16.666666666666668)*i.timeScale;var l=a*a,f=d._timeCorrection?a/(i.deltaTime||a):1,u=1-i.frictionAir*(a/n._baseDelta),v=(i.position.x-i.positionPrev.x)*f,m=(i.position.y-i.positionPrev.y)*f;i.velocity.x=v*u+i.force.x/i.mass*l,i.velocity.y=m*u+i.force.y/i.mass*l,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=a,i.angularVelocity=(i.angle-i.anglePrev)*u*f+i.torque/i.inertia*l,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=h.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var x=0;x<i.parts.length;x++){var g=i.parts[x];c.translate(g.vertices,i.velocity),x>0&&(g.position.x+=i.velocity.x,g.position.y+=i.velocity.y),i.angularVelocity!==0&&(c.rotate(g.vertices,i.angularVelocity,i.position),s.rotate(g.axes,i.angularVelocity),x>0&&h.rotateAbout(g.position,i.angularVelocity,i.position,g.position)),e.update(g.bounds,g.vertices,i.velocity)}},d.updateVelocities=function(i){var a=d._baseDelta/i.deltaTime,l=i.velocity;l.x=(i.position.x-i.positionPrev.x)*a,l.y=(i.position.y-i.positionPrev.y)*a,i.speed=Math.sqrt(l.x*l.x+l.y*l.y),i.angularVelocity=(i.angle-i.anglePrev)*a,i.angularSpeed=Math.abs(i.angularVelocity)},d.applyForce=function(i,a,l){var f={x:a.x-i.position.x,y:a.y-i.position.y};i.force.x+=l.x,i.force.y+=l.y,i.torque+=f.x*l.y-f.y*l.x},d._totalProperties=function(i){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=i.parts.length===1?0:1;l<i.parts.length;l++){var f=i.parts[l],u=f.mass!==1/0?f.mass:1;a.mass+=u,a.area+=f.area,a.inertia+=f.inertia,a.centre=h.add(a.centre,h.mult(f.position,u))}return a.centre=h.div(a.centre,a.mass),a},d.wrap=function(i,a){var l=e.wrap(i.bounds,a);return l&&d.translate(i,l),l}})()}),69351:((p,S,t)=>{var d={};p.exports=d;var c=t(35810),h=t(53402),r=t(15647),n=t(22562);(function(){d.create=function(e){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},d.setModified=function(e,s,o,i){if(c.trigger(e,"compositeModified",e),e.isModified=s,s&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),o&&e.parent&&d.setModified(e.parent,s,o,i),i)for(var a=0;a<e.composites.length;a++){var l=e.composites[a];d.setModified(l,s,o,i)}},d.add=function(e,s){var o=[].concat(s);c.trigger(e,"beforeAdd",{object:s});for(var i=0;i<o.length;i++){var a=o[i];switch(a.type){case"body":if(a.parent!==a){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(e,a);break;case"constraint":d.addConstraint(e,a);break;case"composite":d.addComposite(e,a);break;case"mouseConstraint":d.addConstraint(e,a.constraint);break}}return c.trigger(e,"afterAdd",{object:s}),e},d.remove=function(e,s,o){var i=[].concat(s);c.trigger(e,"beforeRemove",{object:s});for(var a=0;a<i.length;a++){var l=i[a];switch(l.type){case"body":d.removeBody(e,l,o);break;case"constraint":d.removeConstraint(e,l,o);break;case"composite":d.removeComposite(e,l,o);break;case"mouseConstraint":d.removeConstraint(e,l.constraint);break}}return c.trigger(e,"afterRemove",{object:s}),e},d.addComposite=function(e,s){return e.composites.push(s),s.parent=e,d.setModified(e,!0,!0,!1),e},d.removeComposite=function(e,s,o){var i=h.indexOf(e.composites,s);if(i!==-1){var a=d.allBodies(s);d.removeCompositeAt(e,i);for(var l=0;l<a.length;l++)a[l].sleepCounter=0}if(o)for(var l=0;l<e.composites.length;l++)d.removeComposite(e.composites[l],s,!0);return e},d.removeCompositeAt=function(e,s){return e.composites.splice(s,1),d.setModified(e,!0,!0,!1),e},d.addBody=function(e,s){return e.bodies.push(s),d.setModified(e,!0,!0,!1),e},d.removeBody=function(e,s,o){var i=h.indexOf(e.bodies,s);if(i!==-1&&(d.removeBodyAt(e,i),s.sleepCounter=0),o)for(var a=0;a<e.composites.length;a++)d.removeBody(e.composites[a],s,!0);return e},d.removeBodyAt=function(e,s){return e.bodies.splice(s,1),d.setModified(e,!0,!0,!1),e},d.addConstraint=function(e,s){return e.constraints.push(s),d.setModified(e,!0,!0,!1),e},d.removeConstraint=function(e,s,o){var i=h.indexOf(e.constraints,s);if(i!==-1&&d.removeConstraintAt(e,i),o)for(var a=0;a<e.composites.length;a++)d.removeConstraint(e.composites[a],s,!0);return e},d.removeConstraintAt=function(e,s){return e.constraints.splice(s,1),d.setModified(e,!0,!0,!1),e},d.clear=function(e,s,o){if(o)for(var i=0;i<e.composites.length;i++)d.clear(e.composites[i],s,!0);return s?e.bodies=e.bodies.filter(function(a){return a.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,d.setModified(e,!0,!0,!1),e},d.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var s=[].concat(e.bodies),o=0;o<e.composites.length;o++)s=s.concat(d.allBodies(e.composites[o]));return e.cache&&(e.cache.allBodies=s),s},d.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var s=[].concat(e.constraints),o=0;o<e.composites.length;o++)s=s.concat(d.allConstraints(e.composites[o]));return e.cache&&(e.cache.allConstraints=s),s},d.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var s=[].concat(e.composites),o=0;o<e.composites.length;o++)s=s.concat(d.allComposites(e.composites[o]));return e.cache&&(e.cache.allComposites=s),s},d.get=function(e,s,o){var i,a;switch(o){case"body":i=d.allBodies(e);break;case"constraint":i=d.allConstraints(e);break;case"composite":i=d.allComposites(e).concat(e);break}return i?(a=i.filter(function(l){return l.id.toString()===s.toString()}),a.length===0?null:a[0]):null},d.move=function(e,s,o){return d.remove(e,s),d.add(o,s),e},d.rebase=function(e){for(var s=d.allBodies(e).concat(d.allConstraints(e)).concat(d.allComposites(e)),o=0;o<s.length;o++)s[o].id=h.nextId();return e},d.translate=function(e,s,o){for(var i=o?d.allBodies(e):e.bodies,a=0;a<i.length;a++)n.translate(i[a],s);return e},d.rotate=function(e,s,o,i){for(var a=Math.cos(s),l=Math.sin(s),f=i?d.allBodies(e):e.bodies,u=0;u<f.length;u++){var v=f[u],m=v.position.x-o.x,x=v.position.y-o.y;n.setPosition(v,{x:o.x+(m*a-x*l),y:o.y+(m*l+x*a)}),n.rotate(v,s)}return e},d.scale=function(e,s,o,i,a){for(var l=a?d.allBodies(e):e.bodies,f=0;f<l.length;f++){var u=l[f],v=u.position.x-i.x,m=u.position.y-i.y;n.setPosition(u,{x:i.x+v*s,y:i.y+m*o}),n.scale(u,s,o)}return e},d.bounds=function(e){for(var s=d.allBodies(e),o=[],i=0;i<s.length;i+=1){var a=s[i];o.push(a.bounds.min,a.bounds.max)}return r.create(o)},d.wrap=function(e,s){var o=r.wrap(d.bounds(e),s);return o&&d.translate(e,o),o}})()}),4372:((p,S,t)=>{var d={};p.exports=d;var c=t(69351);(function(){d.create=c.create,d.add=c.add,d.remove=c.remove,d.clear=c.clear,d.addComposite=c.addComposite,d.addBody=c.addBody,d.addConstraint=c.addConstraint})()}),52284:((p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(4506);(function(){var r=[],n={overlap:0,axis:null},e={overlap:0,axis:null};d.create=function(s,o){return{pair:null,collided:!1,bodyA:s,bodyB:o,parentA:s.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},d.collides=function(s,o,i){if(d._overlapAxes(n,s.vertices,o.vertices,s.axes),n.overlap<=0||(d._overlapAxes(e,o.vertices,s.vertices,o.axes),e.overlap<=0))return null;var a=i&&i.table[h.id(s,o)],l;a?l=a.collision:(l=d.create(s,o),l.collided=!0,l.bodyA=s.id<o.id?s:o,l.bodyB=s.id<o.id?o:s,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),s=l.bodyA,o=l.bodyB;var f;n.overlap<e.overlap?f=n:f=e;var u=l.normal,v=l.tangent,m=l.penetration,x=l.supports,g=f.overlap,y=f.axis,T=y.x,C=y.y,E=o.position.x-s.position.x,M=o.position.y-s.position.y;T*E+C*M>=0&&(T=-T,C=-C),u.x=T,u.y=C,v.x=-C,v.y=T,m.x=T*g,m.y=C*g,l.depth=g;var P=d._findSupports(s,o,u,1),A=0;if(c.contains(s.vertices,P[0])&&(x[A++]=P[0]),c.contains(s.vertices,P[1])&&(x[A++]=P[1]),A<2){var R=d._findSupports(o,s,u,-1);c.contains(o.vertices,R[0])&&(x[A++]=R[0]),A<2&&c.contains(o.vertices,R[1])&&(x[A++]=R[1])}return A===0&&(x[A++]=P[0]),l.supportCount=A,l},d._overlapAxes=function(s,o,i,a){var l=o.length,f=i.length,u=o[0].x,v=o[0].y,m=i[0].x,x=i[0].y,g=a.length,y=Number.MAX_VALUE,T=0,C,E,M,P,A,R;for(A=0;A<g;A++){var F=a[A],w=F.x,I=F.y,U=u*w+v*I,N=m*w+x*I,D=U,B=N;for(R=1;R<l;R+=1)P=o[R].x*w+o[R].y*I,P>D?D=P:P<U&&(U=P);for(R=1;R<f;R+=1)P=i[R].x*w+i[R].y*I,P>B?B=P:P<N&&(N=P);if(E=D-N,M=B-U,C=E<M?E:M,C<y&&(y=C,T=A,C<=0))break}s.axis=a[T],s.overlap=y},d._findSupports=function(s,o,i,a){var l=o.vertices,f=l.length,u=s.position.x,v=s.position.y,m=i.x*a,x=i.y*a,g=l[0],y=g,T=m*(u-y.x)+x*(v-y.y),C,E,M;for(M=1;M<f;M+=1)y=l[M],E=m*(u-y.x)+x*(v-y.y),E<T&&(T=E,g=y);return C=l[(f+g.index-1)%f],T=m*(u-C.x)+x*(v-C.y),y=l[(g.index+1)%f],m*(u-y.x)+x*(v-y.y)<T?(r[0]=g,r[1]=y,r):(r[0]=g,r[1]=C,r)}})()}),43424:(p=>{var S={};p.exports=S,(function(){S.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}})()}),81388:((p,S,t)=>{var d={};p.exports=d;var c=t(53402),h=t(52284);(function(){d.create=function(r){var n={bodies:[],collisions:[],pairs:null};return c.extend(n,r)},d.setBodies=function(r,n){r.bodies=n.slice(0)},d.clear=function(r){r.bodies=[],r.collisions=[]},d.collisions=function(r){var n=r.pairs,e=r.bodies,s=e.length,o=d.canCollide,i=h.collides,a=r.collisions,l=0,f,u;for(e.sort(d._compareBoundsX),f=0;f<s;f++){var v=e[f],m=v.bounds,x=v.bounds.max.x,g=v.bounds.max.y,y=v.bounds.min.y,T=v.isStatic||v.isSleeping,C=v.parts.length,E=C===1;for(u=f+1;u<s;u++){var M=e[u],P=M.bounds;if(P.min.x>x)break;if(!(g<P.min.y||y>P.max.y)&&!(T&&(M.isStatic||M.isSleeping))&&o(v.collisionFilter,M.collisionFilter)){var A=M.parts.length;if(E&&A===1){var R=i(v,M,n);R&&(a[l++]=R)}else for(var F=C>1?1:0,w=A>1?1:0,I=F;I<C;I++)for(var U=v.parts[I],m=U.bounds,N=w;N<A;N++){var D=M.parts[N],P=D.bounds;if(!(m.min.x>P.max.x||m.max.x<P.min.x||m.max.y<P.min.y||m.min.y>P.max.y)){var R=i(U,D,n);R&&(a[l++]=R)}}}}}return a.length!==l&&(a.length=l),a},d.canCollide=function(r,n){return r.group===n.group&&r.group!==0?r.group>0:(r.mask&n.category)!==0&&(n.mask&r.category)!==0},d._compareBoundsX=function(r,n){return r.bounds.min.x-n.bounds.min.x}})()}),4506:((p,S,t)=>{var d={};p.exports=d;var c=t(43424);(function(){d.create=function(h,r){var n=h.bodyA,e=h.bodyB,s={id:d.id(n,e),bodyA:n,bodyB:e,collision:h,contacts:[c.create(),c.create()],contactCount:0,separation:0,isActive:!0,isSensor:n.isSensor||e.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return d.update(s,h,r),s},d.update=function(h,r,n){var e=r.supports,s=r.supportCount,o=h.contacts,i=r.parentA,a=r.parentB;h.isActive=!0,h.timeUpdated=n,h.collision=r,h.separation=r.depth,h.inverseMass=i.inverseMass+a.inverseMass,h.friction=i.friction<a.friction?i.friction:a.friction,h.frictionStatic=i.frictionStatic>a.frictionStatic?i.frictionStatic:a.frictionStatic,h.restitution=i.restitution>a.restitution?i.restitution:a.restitution,h.slop=i.slop>a.slop?i.slop:a.slop,h.contactCount=s,r.pair=h;var l=e[0],f=o[0],u=e[1],v=o[1];(v.vertex===l||f.vertex===u)&&(o[1]=f,o[0]=f=v,v=o[1]),f.vertex=l,v.vertex=u},d.setActive=function(h,r,n){r?(h.isActive=!0,h.timeUpdated=n):(h.isActive=!1,h.contactCount=0)},d.id=function(h,r){return h.id<r.id?h.id.toString(36)+":"+r.id.toString(36):r.id.toString(36)+":"+h.id.toString(36)}})()}),99561:((p,S,t)=>{var d={};p.exports=d;var c=t(4506),h=t(53402);(function(){d.create=function(r){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},d.update=function(r,n,e){var s=c.update,o=c.create,i=c.setActive,a=r.table,l=r.list,f=l.length,u=f,v=r.collisionStart,m=r.collisionEnd,x=r.collisionActive,g=n.length,y=0,T=0,C=0,E,M,P;for(P=0;P<g;P++)E=n[P],M=E.pair,M?(M.isActive&&(x[C++]=M),s(M,E,e)):(M=o(E,e),a[M.id]=M,v[y++]=M,l[u++]=M);for(u=0,f=l.length,P=0;P<f;P++)M=l[P],M.timeUpdated>=e?l[u++]=M:(i(M,!1,e),M.collision.bodyA.sleepCounter>0&&M.collision.bodyB.sleepCounter>0?l[u++]=M:(m[T++]=M,delete a[M.id]));l.length!==u&&(l.length=u),v.length!==y&&(v.length=y),m.length!==T&&(m.length=T),x.length!==C&&(x.length=C)},d.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()}),73296:((p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(52284),r=t(15647),n=t(66280),e=t(41598);(function(){d.collides=function(s,o){for(var i=[],a=o.length,l=s.bounds,f=h.collides,u=r.overlaps,v=0;v<a;v++){var m=o[v],x=m.parts.length,g=x===1?0:1;if(s!==m&&u(m.bounds,l))for(var y=g;y<x;y++){var T=m.parts[y];if(u(T.bounds,l)){var C=f(T,s);if(C){i.push(C);break}}}}return i},d.ray=function(s,o,i,a){a=a||1e-100;for(var l=c.angle(o,i),f=c.magnitude(c.sub(o,i)),u=(i.x+o.x)*.5,v=(i.y+o.y)*.5,m=n.rectangle(u,v,f,a,{angle:l}),x=d.collides(m,s),g=0;g<x.length;g+=1){var y=x[g];y.body=y.bodyB=y.bodyA}return x},d.region=function(s,o,i){for(var a=[],l=0;l<s.length;l++){var f=s[l],u=r.overlaps(f.bounds,o);(u&&!i||!u&&i)&&a.push(f)}return a},d.point=function(s,o){for(var i=[],a=0;a<s.length;a++){var l=s[a];if(r.contains(l.bounds,o))for(var f=l.parts.length===1?0:1;f<l.parts.length;f++){var u=l.parts[f];if(r.contains(u.bounds,o)&&e.contains(u.vertices,o)){i.push(l);break}}}return i}})()}),66272:((p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(53402),r=t(15647);(function(){d._restingThresh=2,d._restingThreshTangent=Math.sqrt(6),d._positionDampen=.9,d._positionWarming=.8,d._frictionNormalMultiplier=5,d._frictionMaxStatic=Number.MAX_VALUE,d.preSolvePosition=function(n){var e,s,o,i=n.length;for(e=0;e<i;e++)s=n[e],s.isActive&&(o=s.contactCount,s.collision.parentA.totalContacts+=o,s.collision.parentB.totalContacts+=o)},d.solvePosition=function(n,e,s){var o,i,a,l,f,u,v,m,x=d._positionDampen*(s||1),g=h.clamp(e/h._baseDelta,0,1),y=n.length;for(o=0;o<y;o++)i=n[o],!(!i.isActive||i.isSensor)&&(a=i.collision,l=a.parentA,f=a.parentB,u=a.normal,i.separation=a.depth+u.x*(f.positionImpulse.x-l.positionImpulse.x)+u.y*(f.positionImpulse.y-l.positionImpulse.y));for(o=0;o<y;o++)i=n[o],!(!i.isActive||i.isSensor)&&(a=i.collision,l=a.parentA,f=a.parentB,u=a.normal,m=i.separation-i.slop*g,(l.isStatic||f.isStatic)&&(m*=2),l.isStatic||l.isSleeping||(v=x/l.totalContacts,l.positionImpulse.x+=u.x*m*v,l.positionImpulse.y+=u.y*m*v),f.isStatic||f.isSleeping||(v=x/f.totalContacts,f.positionImpulse.x-=u.x*m*v,f.positionImpulse.y-=u.y*m*v))},d.postSolvePosition=function(n){for(var e=d._positionWarming,s=n.length,o=c.translate,i=r.update,a=0;a<s;a++){var l=n[a],f=l.positionImpulse,u=f.x,v=f.y,m=l.velocity;if(l.totalContacts=0,u!==0||v!==0){for(var x=0;x<l.parts.length;x++){var g=l.parts[x];o(g.vertices,f),i(g.bounds,g.vertices,m),g.position.x+=u,g.position.y+=v}l.positionPrev.x+=u,l.positionPrev.y+=v,u*m.x+v*m.y<0?(f.x=0,f.y=0):(f.x*=e,f.y*=e)}}},d.preSolveVelocity=function(n){var e=n.length,s,o;for(s=0;s<e;s++){var i=n[s];if(!(!i.isActive||i.isSensor)){var a=i.contacts,l=i.contactCount,f=i.collision,u=f.parentA,v=f.parentB,m=f.normal,x=f.tangent;for(o=0;o<l;o++){var g=a[o],y=g.vertex,T=g.normalImpulse,C=g.tangentImpulse;if(T!==0||C!==0){var E=m.x*T+x.x*C,M=m.y*T+x.y*C;u.isStatic||u.isSleeping||(u.positionPrev.x+=E*u.inverseMass,u.positionPrev.y+=M*u.inverseMass,u.anglePrev+=u.inverseInertia*((y.x-u.position.x)*M-(y.y-u.position.y)*E)),v.isStatic||v.isSleeping||(v.positionPrev.x-=E*v.inverseMass,v.positionPrev.y-=M*v.inverseMass,v.anglePrev-=v.inverseInertia*((y.x-v.position.x)*M-(y.y-v.position.y)*E))}}}}},d.solveVelocity=function(n,e){var s=e/h._baseDelta,o=s*s,i=o*s,a=-d._restingThresh*s,l=d._restingThreshTangent,f=d._frictionNormalMultiplier*s,u=d._frictionMaxStatic,v=n.length,m,x,g,y;for(g=0;g<v;g++){var T=n[g];if(!(!T.isActive||T.isSensor)){var C=T.collision,E=C.parentA,M=C.parentB,P=C.normal.x,A=C.normal.y,R=C.tangent.x,F=C.tangent.y,w=T.inverseMass,I=T.friction*T.frictionStatic*f,U=T.contacts,N=T.contactCount,D=1/N,B=E.position.x-E.positionPrev.x,L=E.position.y-E.positionPrev.y,G=E.angle-E.anglePrev,O=M.position.x-M.positionPrev.x,z=M.position.y-M.positionPrev.y,X=M.angle-M.anglePrev;for(y=0;y<N;y++){var V=U[y],Y=V.vertex,W=Y.x-E.position.x,H=Y.y-E.position.y,K=Y.x-M.position.x,b=Y.y-M.position.y,J=B-H*G,$=L+W*G,Z=O-b*X,q=z+K*X,_=J-Z,tt=$-q,Q=P*_+A*tt,j=R*_+F*tt,k=T.separation+Q,et=Math.min(k,1);et=k<0?0:et;var nt=et*I;j<-nt||j>nt?(x=j>0?j:-j,m=T.friction*(j>0?1:-1)*i,m<-x?m=-x:m>x&&(m=x)):(m=j,x=u);var lt=W*A-H*P,it=K*A-b*P,st=D/(w+E.inverseInertia*lt*lt+M.inverseInertia*it*it),dt=(1+T.restitution)*Q*st;if(m*=st,Q<a)V.normalImpulse=0;else{var gt=V.normalImpulse;V.normalImpulse+=dt,V.normalImpulse>0&&(V.normalImpulse=0),dt=V.normalImpulse-gt}if(j<-l||j>l)V.tangentImpulse=0;else{var at=V.tangentImpulse;V.tangentImpulse+=m,V.tangentImpulse<-x&&(V.tangentImpulse=-x),V.tangentImpulse>x&&(V.tangentImpulse=x),m=V.tangentImpulse-at}var vt=P*dt+R*m,pt=A*dt+F*m;E.isStatic||E.isSleeping||(E.positionPrev.x+=vt*E.inverseMass,E.positionPrev.y+=pt*E.inverseMass,E.anglePrev+=(W*pt-H*vt)*E.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=vt*M.inverseMass,M.positionPrev.y-=pt*M.inverseMass,M.anglePrev-=(K*pt-b*vt)*M.inverseInertia)}}}}})()}),48140:((p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(31725),r=t(53614),n=t(15647),e=t(66615),s=t(53402);(function(){d._warming=.4,d._torqueDampen=1,d._minLength=1e-6,d.create=function(o){var i=o;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var a=i.bodyA?h.add(i.bodyA.position,i.pointA):i.pointA,l=i.bodyB?h.add(i.bodyB.position,i.pointB):i.pointB,f=h.magnitude(h.sub(a,l));i.length=typeof i.length<"u"?i.length:f,i.id=i.id||s.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var u={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(u.type="pin",u.anchors=!1):i.stiffness<.9&&(u.type="spring"),i.render=s.extend(u,i.render),i},d.preSolveAll=function(o){for(var i=0;i<o.length;i+=1){var a=o[i],l=a.constraintImpulse;a.isStatic||l.x===0&&l.y===0&&l.angle===0||(a.position.x+=l.x,a.position.y+=l.y,a.angle+=l.angle)}},d.solveAll=function(o,i){for(var a=s.clamp(i/s._baseDelta,0,1),l=0;l<o.length;l+=1){var f=o[l],u=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(u||v)&&d.solve(o[l],a)}for(l=0;l<o.length;l+=1)f=o[l],u=!f.bodyA||f.bodyA&&f.bodyA.isStatic,v=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!u&&!v&&d.solve(o[l],a)},d.solve=function(o,i){var a=o.bodyA,l=o.bodyB,f=o.pointA,u=o.pointB;if(!(!a&&!l)){a&&!a.isStatic&&(h.rotate(f,a.angle-o.angleA,f),o.angleA=a.angle),l&&!l.isStatic&&(h.rotate(u,l.angle-o.angleB,u),o.angleB=l.angle);var v=f,m=u;if(a&&(v=h.add(a.position,f)),l&&(m=h.add(l.position,u)),!(!v||!m)){var x=h.sub(v,m),g=h.magnitude(x);g<d._minLength&&(g=d._minLength);var y=(g-o.length)/g,T=o.stiffness>=1||o.length===0,C=T?o.stiffness*i:o.stiffness*i*i,E=o.damping*i,M=h.mult(x,y*C),P=(a?a.inverseMass:0)+(l?l.inverseMass:0),A=(a?a.inverseInertia:0)+(l?l.inverseInertia:0),R=P+A,F,w,I,U,N;if(E>0){var D=h.create();I=h.div(x,g),N=h.sub(l&&h.sub(l.position,l.positionPrev)||D,a&&h.sub(a.position,a.positionPrev)||D),U=h.dot(I,N)}a&&!a.isStatic&&(w=a.inverseMass/P,a.constraintImpulse.x-=M.x*w,a.constraintImpulse.y-=M.y*w,a.position.x-=M.x*w,a.position.y-=M.y*w,E>0&&(a.positionPrev.x-=E*I.x*U*w,a.positionPrev.y-=E*I.y*U*w),F=h.cross(f,M)/R*d._torqueDampen*a.inverseInertia*(1-o.angularStiffness),a.constraintImpulse.angle-=F,a.angle-=F),l&&!l.isStatic&&(w=l.inverseMass/P,l.constraintImpulse.x+=M.x*w,l.constraintImpulse.y+=M.y*w,l.position.x+=M.x*w,l.position.y+=M.y*w,E>0&&(l.positionPrev.x+=E*I.x*U*w,l.positionPrev.y+=E*I.y*U*w),F=h.cross(u,M)/R*d._torqueDampen*l.inverseInertia*(1-o.angularStiffness),l.constraintImpulse.angle+=F,l.angle+=F)}}},d.postSolveAll=function(o){for(var i=0;i<o.length;i++){var a=o[i],l=a.constraintImpulse;if(!(a.isStatic||l.x===0&&l.y===0&&l.angle===0)){r.set(a,!1);for(var f=0;f<a.parts.length;f++){var u=a.parts[f];c.translate(u.vertices,l),f>0&&(u.position.x+=l.x,u.position.y+=l.y),l.angle!==0&&(c.rotate(u.vertices,l.angle,a.position),e.rotate(u.axes,l.angle),f>0&&h.rotateAbout(u.position,l.angle,a.position,u.position)),n.update(u.bounds,u.vertices,a.velocity)}l.angle*=d._warming,l.x*=d._warming,l.y*=d._warming}}},d.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},d.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}},d.currentLength=function(o){var i=(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),a=(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0),l=(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),f=(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0),u=i-l,v=a-f;return Math.sqrt(u*u+v*v)}})()}),53402:((p,S,t)=>{var d={};p.exports=d,(function(){d._baseDelta=16.666666666666668,d._nextId=0,d._seed=0,d._nowStartTime=+new Date,d._warnedOnce={},d._decomp=null,d.extend=function(h,r){var n,e;typeof r=="boolean"?(n=2,e=r):(n=1,e=!0);for(var s=n;s<arguments.length;s++){var o=arguments[s];if(o)for(var i in o)e&&o[i]&&o[i].constructor===Object&&(!h[i]||h[i].constructor===Object)?(h[i]=h[i]||{},d.extend(h[i],e,o[i])):h[i]=o[i]}return h},d.clone=function(h,r){return d.extend({},r,h)},d.keys=function(h){if(Object.keys)return Object.keys(h);var r=[];for(var n in h)r.push(n);return r},d.values=function(h){var r=[];if(Object.keys){for(var n=Object.keys(h),e=0;e<n.length;e++)r.push(h[n[e]]);return r}for(var s in h)r.push(h[s]);return r},d.get=function(h,r,n,e){r=r.split(".").slice(n,e);for(var s=0;s<r.length;s+=1)h=h[r[s]];return h},d.set=function(h,r,n,e,s){var o=r.split(".").slice(e,s);return d.get(h,r,0,-1)[o[o.length-1]]=n,n},d.shuffle=function(h){for(var r=h.length-1;r>0;r--){var n=Math.floor(d.random()*(r+1)),e=h[r];h[r]=h[n],h[n]=e}return h},d.choose=function(h){return h[Math.floor(d.random()*h.length)]},d.isElement=function(h){return typeof HTMLElement<"u"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},d.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},d.isFunction=function(h){return typeof h=="function"},d.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},d.isString=function(h){return toString.call(h)==="[object String]"},d.clamp=function(h,r,n){return h<r?r:h>n?n:h},d.sign=function(h){return h<0?-1:1},d.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-d._nowStartTime},d.random=function(h,r){return h=typeof h<"u"?h:0,r=typeof r<"u"?r:1,h+c()*(r-h)};var c=function(){return d._seed=(d._seed*9301+49297)%233280,d._seed/233280};d.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},d.logLevel=1,d.log=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.info=function(){console&&d.logLevel>0&&d.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warn=function(){console&&d.logLevel>0&&d.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},d.warnOnce=function(){var h=Array.prototype.slice.call(arguments).join(" ");d._warnedOnce[h]||(d.warn(h),d._warnedOnce[h]=!0)},d.deprecated=function(h,r,n){h[r]=d.chain(function(){d.warnOnce(" deprecated ",n)},h[r])},d.nextId=function(){return d._nextId++},d.indexOf=function(h,r){if(h.indexOf)return h.indexOf(r);for(var n=0;n<h.length;n++)if(h[n]===r)return n;return-1},d.map=function(h,r){if(h.map)return h.map(r);for(var n=[],e=0;e<h.length;e+=1)n.push(r(h[e]));return n},d.topologicalSort=function(h){var r=[],n=[],e=[];for(var s in h)!n[s]&&!e[s]&&d._topologicalSort(s,n,e,h,r);return r},d._topologicalSort=function(h,r,n,e,s){var o=e[h]||[];n[h]=!0;for(var i=0;i<o.length;i+=1){var a=o[i];n[a]||r[a]||d._topologicalSort(a,r,n,e,s)}n[h]=!1,r[h]=!0,s.push(h)},d.chain=function(){for(var h=[],r=0;r<arguments.length;r+=1){var n=arguments[r];n._chained?h.push.apply(h,n._chained):h.push(n)}var e=function(){for(var s,o=new Array(arguments.length),i=0,a=arguments.length;i<a;i++)o[i]=arguments[i];for(i=0;i<h.length;i+=1){var l=h[i].apply(s,o);typeof l<"u"&&(s=l)}return s};return e._chained=h,e},d.chainPathBefore=function(h,r,n){return d.set(h,r,d.chain(n,d.get(h,r)))},d.chainPathAfter=function(h,r,n){return d.set(h,r,d.chain(d.get(h,r),n))},d.setDecomp=function(h){d._decomp=h},d.getDecomp=function(){var h=d._decomp;try{!h&&typeof window<"u"&&(h=window.decomp),!h&&typeof t.g<"u"&&(h=t.g.decomp)}catch{h=null}return h}})()}),48413:((p,S,t)=>{var d={};p.exports=d;var c=t(53614),h=t(66272),r=t(81388),n=t(99561),e=t(35810),s=t(69351),o=t(48140),i=t(53402),a=t(22562);(function(){d._deltaMax=16.666666666666668,d.create=function(l){l=l||{};var f={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},u=i.extend(f,l);return u.world=l.world||s.create({label:"World"}),u.pairs=l.pairs||n.create(),u.detector=l.detector||r.create(),u.detector.pairs=u.pairs,u.grid={buckets:[]},u.world.gravity=u.gravity,u.broadphase=u.grid,u.metrics={},u},d.update=function(l,f){var u=i.now(),v=l.world,m=l.detector,x=l.pairs,g=l.timing,y=g.timestamp,T;f>d._deltaMax&&i.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",d._deltaMax.toFixed(3),"ms."),f=typeof f<"u"?f:i._baseDelta,f*=g.timeScale,g.timestamp+=f,g.lastDelta=f;var C={timestamp:g.timestamp,delta:f};e.trigger(l,"beforeUpdate",C);var E=s.allBodies(v),M=s.allConstraints(v),P=s.allComposites(v);for(v.isModified&&(r.setBodies(m,E),s.setModified(v,!1,!1,!0)),l.enableSleeping&&c.update(E,f),d._bodiesApplyGravity(E,l.gravity),d.wrap(E,P),d.attractors(E),f>0&&d._bodiesUpdate(E,f),e.trigger(l,"beforeSolve",C),o.preSolveAll(E),T=0;T<l.constraintIterations;T++)o.solveAll(M,f);o.postSolveAll(E);var A=r.collisions(m);n.update(x,A,y),l.enableSleeping&&c.afterCollisions(x.list),x.collisionStart.length>0&&e.trigger(l,"collisionStart",{pairs:x.collisionStart,timestamp:g.timestamp,delta:f});var R=i.clamp(20/l.positionIterations,0,1);for(h.preSolvePosition(x.list),T=0;T<l.positionIterations;T++)h.solvePosition(x.list,f,R);for(h.postSolvePosition(E),o.preSolveAll(E),T=0;T<l.constraintIterations;T++)o.solveAll(M,f);for(o.postSolveAll(E),h.preSolveVelocity(x.list),T=0;T<l.velocityIterations;T++)h.solveVelocity(x.list,f);return d._bodiesUpdateVelocities(E),x.collisionActive.length>0&&e.trigger(l,"collisionActive",{pairs:x.collisionActive,timestamp:g.timestamp,delta:f}),x.collisionEnd.length>0&&e.trigger(l,"collisionEnd",{pairs:x.collisionEnd,timestamp:g.timestamp,delta:f}),d._bodiesClearForces(E),e.trigger(l,"afterUpdate",C),l.timing.lastElapsed=i.now()-u,l},d.merge=function(l,f){if(i.extend(l,f),f.world){l.world=f.world,d.clear(l);for(var u=s.allBodies(l.world),v=0;v<u.length;v++){var m=u[v];c.set(m,!1),m.id=i.nextId()}}},d.clear=function(l){n.clear(l.pairs),r.clear(l.detector)},d._bodiesClearForces=function(l){for(var f=l.length,u=0;u<f;u++){var v=l[u];v.force.x=0,v.force.y=0,v.torque=0}},d._bodiesApplyGravity=function(l,f){var u=typeof f.scale<"u"?f.scale:.001,v=l.length;if(!(f.x===0&&f.y===0||u===0))for(var m=0;m<v;m++){var x=l[m];x.ignoreGravity||x.isStatic||x.isSleeping||(x.force.y+=x.mass*f.y*u,x.force.x+=x.mass*f.x*u)}},d._bodiesUpdate=function(l,f){for(var u=l.length,v=0;v<u;v++){var m=l[v];m.isStatic||m.isSleeping||a.update(m,f)}},d._bodiesUpdateVelocities=function(l){for(var f=l.length,u=0;u<f;u++)a.updateVelocities(l[u])},d.wrap=function(l,f){for(var u=0;u<l.length;u+=1){var v=l[u];v.wrapBounds!==null&&a.wrap(v,v.wrapBounds)}for(u=0;u<f.length;u+=1){var m=f[u];m.wrapBounds!==null&&s.wrap(m,m.wrapBounds)}},d.attractors=function(l){for(var f=0;f<l.length;f++){var u=l[f],v=u.attractors;if(v&&v.length>0)for(var m=0;m<l.length;m++){var x=l[m];if(f!==m)for(var g=0;g<v.length;g++){var y=v[g],T=y;i.isFunction(y)&&(T=y(u,x)),T&&a.applyForce(x,x.position,T)}}}}})()}),35810:((p,S,t)=>{var d={};p.exports=d;var c=t(53402);(function(){d.on=function(h,r,n){for(var e=r.split(" "),s,o=0;o<e.length;o++)s=e[o],h.events=h.events||{},h.events[s]=h.events[s]||[],h.events[s].push(n);return n},d.off=function(h,r,n){if(!r){h.events={};return}typeof r=="function"&&(n=r,r=c.keys(h.events).join(" "));for(var e=r.split(" "),s=0;s<e.length;s++){var o=h.events[e[s]],i=[];if(n&&o)for(var a=0;a<o.length;a++)o[a]!==n&&i.push(o[a]);h.events[e[s]]=i}},d.trigger=function(h,r,n){var e,s,o,i,a=h.events;if(a&&c.keys(a).length>0){n||(n={}),e=r.split(" ");for(var l=0;l<e.length;l++)if(s=e[l],o=a[s],o){i=c.clone(n,!1),i.name=s,i.source=h;for(var f=0;f<o.length;f++)o[f].apply(h,[i])}}}})()}),6790:((p,S,t)=>{var d={};p.exports=d;var c=t(73832),h=t(53402);(function(){d.name="matter-js",d.version="0.20.0",d.uses=[],d.used=[],d.use=function(){c.use(d,Array.prototype.slice.call(arguments))},d.before=function(r,n){return r=r.replace(/^Matter./,""),h.chainPathBefore(d,r,n)},d.after=function(r,n){return r=r.replace(/^Matter./,""),h.chainPathAfter(d,r,n)}})()}),73832:((p,S,t)=>{var d={};p.exports=d;var c=t(53402);(function(){d._registry={},d.register=function(h){if(d.isPlugin(h)||c.warn("Plugin.register:",d.toString(h),"does not implement all required fields."),h.name in d._registry){var r=d._registry[h.name],n=d.versionParse(h.version).number,e=d.versionParse(r.version).number;n>e?(c.warn("Plugin.register:",d.toString(r),"was upgraded to",d.toString(h)),d._registry[h.name]=h):n<e?c.warn("Plugin.register:",d.toString(r),"can not be downgraded to",d.toString(h)):h!==r&&c.warn("Plugin.register:",d.toString(h),"is already registered to different plugin object")}else d._registry[h.name]=h;return h},d.resolve=function(h){return d._registry[d.dependencyParse(h).name]},d.toString=function(h){return typeof h=="string"?h:(h.name||"anonymous")+"@"+(h.version||h.range||"0.0.0")},d.isPlugin=function(h){return h&&h.name&&h.version&&h.install},d.isUsed=function(h,r){return h.used.indexOf(r)>-1},d.isFor=function(h,r){var n=h.for&&d.dependencyParse(h.for);return!h.for||r.name===n.name&&d.versionSatisfies(r.version,n.range)},d.use=function(h,r){if(h.uses=(h.uses||[]).concat(r||[]),h.uses.length===0){c.warn("Plugin.use:",d.toString(h),"does not specify any dependencies to install.");return}for(var n=d.dependencies(h),e=c.topologicalSort(n),s=[],o=0;o<e.length;o+=1)if(e[o]!==h.name){var i=d.resolve(e[o]);if(!i){s.push(" "+e[o]);continue}d.isUsed(h,i.name)||(d.isFor(i,h)||(c.warn("Plugin.use:",d.toString(i),"is for",i.for,"but installed on",d.toString(h)+"."),i._warned=!0),i.install?i.install(h):(c.warn("Plugin.use:",d.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(s.push(" "+d.toString(i)),delete i._warned):s.push(" "+d.toString(i)),h.used.push(i.name))}s.length>0&&!i.silent&&c.info(s.join("  "))},d.dependencies=function(h,r){var n=d.dependencyParse(h),e=n.name;if(r=r||{},!(e in r)){h=d.resolve(h)||h,r[e]=c.map(h.uses||[],function(o){d.isPlugin(o)&&d.register(o);var i=d.dependencyParse(o),a=d.resolve(o);return a&&!d.versionSatisfies(a.version,i.range)?(c.warn("Plugin.dependencies:",d.toString(a),"does not satisfy",d.toString(i),"used by",d.toString(n)+"."),a._warned=!0,h._warned=!0):a||(c.warn("Plugin.dependencies:",d.toString(o),"used by",d.toString(n),"could not be resolved."),h._warned=!0),i.name});for(var s=0;s<r[e].length;s+=1)d.dependencies(r[e][s],r);return r}},d.dependencyParse=function(h){if(c.isString(h)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(h)||c.warn("Plugin.dependencyParse:",h,"is not a valid dependency string."),{name:h.split("@")[0],range:h.split("@")[1]||"*"}}return{name:h.name,range:h.range||h.version}},d.versionParse=function(h){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(h)||c.warn("Plugin.versionParse:",h,"is not a valid version or range.");var n=r.exec(h),e=Number(n[4]),s=Number(n[5]),o=Number(n[6]);return{isRange:!!(n[1]||n[2]),version:n[3],range:h,operator:n[1]||n[2]||"",major:e,minor:s,patch:o,parts:[e,s,o],prerelease:n[7],number:e*1e8+s*1e4+o}},d.versionSatisfies=function(h,r){r=r||"*";var n=d.versionParse(r),e=d.versionParse(h);if(n.isRange){if(n.operator==="*"||h==="*")return!0;if(n.operator===">")return e.number>n.number;if(n.operator===">=")return e.number>=n.number;if(n.operator==="~")return e.major===n.major&&e.minor===n.minor&&e.patch>=n.patch;if(n.operator==="^")return n.major>0?e.major===n.major&&e.number>=n.number:n.minor>0?e.minor===n.minor&&e.patch>=n.patch:e.patch===n.patch}return h===r||h==="*"}})()}),13037:((p,S,t)=>{var d={};p.exports=d;var c=t(35810),h=t(48413),r=t(53402);(function(){d._maxFrameDelta=66.66666666666667,d._frameDeltaFallback=16.666666666666668,d._timeBufferMargin=1.5,d._elapsedNextEstimate=1,d._smoothingLowerBound=.1,d._smoothingUpperBound=.9,d.create=function(e){var s={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},o=r.extend(s,e);return o.fps=0,o},d.run=function(e,s){return e.timeBuffer=d._frameDeltaFallback,(function o(i){e.frameRequestId=d._onNextFrame(e,o),i&&e.enabled&&d.tick(e,s,i)})(),e},d.tick=function(e,s,o){var i=r.now(),a=e.delta,l=0,f=o-e.timeLastTick;if((!f||!e.timeLastTick||f>Math.max(d._maxFrameDelta,e.maxFrameTime))&&(f=e.frameDelta||d._frameDeltaFallback),e.frameDeltaSmoothing){e.frameDeltaHistory.push(f),e.frameDeltaHistory=e.frameDeltaHistory.slice(-e.frameDeltaHistorySize);var u=e.frameDeltaHistory.slice(0).sort(),v=e.frameDeltaHistory.slice(u.length*d._smoothingLowerBound,u.length*d._smoothingUpperBound),m=n(v);f=m||f}e.frameDeltaSnapping&&(f=1e3/Math.round(1e3/f)),e.frameDelta=f,e.timeLastTick=o,e.timeBuffer+=e.frameDelta,e.timeBuffer=r.clamp(e.timeBuffer,0,e.frameDelta+a*d._timeBufferMargin),e.lastUpdatesDeferred=0;var x=e.maxUpdates||Math.ceil(e.maxFrameTime/a),g={timestamp:s.timing.timestamp};c.trigger(e,"beforeTick",g),c.trigger(e,"tick",g);for(var y=r.now();a>0&&e.timeBuffer>=a*d._timeBufferMargin;){c.trigger(e,"beforeUpdate",g),h.update(s,a),c.trigger(e,"afterUpdate",g),e.timeBuffer-=a,l+=1;var T=r.now()-i,C=r.now()-y,E=T+d._elapsedNextEstimate*C/l;if(l>=x||E>e.maxFrameTime){e.lastUpdatesDeferred=Math.round(Math.max(0,e.timeBuffer/a-d._timeBufferMargin));break}}s.timing.lastUpdatesPerFrame=l,c.trigger(e,"afterTick",g),e.frameDeltaHistory.length>=100&&(e.lastUpdatesDeferred&&Math.round(e.frameDelta/a)>x?r.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):e.lastUpdatesDeferred&&r.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof e.isFixed<"u"&&r.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(e.deltaMin||e.deltaMax)&&r.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),e.fps!==0&&r.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},d.stop=function(e){d._cancelNextFrame(e)},d._onNextFrame=function(e,s){if(typeof window<"u"&&window.requestAnimationFrame)e.frameRequestId=window.requestAnimationFrame(s);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId},d._cancelNextFrame=function(e){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(e.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var n=function(e){for(var s=0,o=e.length,i=0;i<o;i+=1)s+=e[i];return s/o||0};d._mean=n})()}),53614:((p,S,t)=>{var d={};p.exports=d;var c=t(22562),h=t(35810),r=t(53402);(function(){d._motionWakeThreshold=.18,d._motionSleepThreshold=.08,d._minBias=.9,d.update=function(n,e){for(var s=e/r._baseDelta,o=d._motionSleepThreshold,i=0;i<n.length;i++){var a=n[i],l=c.getSpeed(a),f=c.getAngularSpeed(a),u=l*l+f*f;if(a.force.x!==0||a.force.y!==0){d.set(a,!1);continue}var v=Math.min(a.motion,u),m=Math.max(a.motion,u);a.motion=d._minBias*v+(1-d._minBias)*m,a.sleepThreshold>0&&a.motion<o?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold/s&&d.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}},d.afterCollisions=function(n){for(var e=d._motionSleepThreshold,s=0;s<n.length;s++){var o=n[s];if(o.isActive){var i=o.collision,a=i.bodyA.parent,l=i.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var f=a.isSleeping&&!a.isStatic?a:l,u=f===a?l:a;!f.isStatic&&u.motion>e&&d.set(f,!1)}}}},d.set=function(n,e){var s=n.isSleeping;e?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,s||h.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,s&&h.trigger(n,"sleepEnd"))}})()}),66280:((p,S,t)=>{var d={};p.exports=d;var c=t(41598),h=t(53402),r=t(22562),n=t(15647),e=t(31725);(function(){d.rectangle=function(s,o,i,a,l){l=l||{};var f={label:"Rectangle Body",position:{x:s,y:o},vertices:c.fromPath("L 0 0 L "+i+" 0 L "+i+" "+a+" L 0 "+a)};if(l.chamfer){var u=l.chamfer;f.vertices=c.chamfer(f.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete l.chamfer}return r.create(h.extend({},f,l))},d.trapezoid=function(s,o,i,a,l,f){f=f||{},l>=1&&h.warn("Bodies.trapezoid: slope parameter must be < 1."),l*=.5;var u=(1-l*2)*i,v=i*l,m=v+u,x=m+v,g;l<.5?g="L 0 0 L "+v+" "+-a+" L "+m+" "+-a+" L "+x+" 0":g="L 0 0 L "+m+" "+-a+" L "+x+" 0";var y={label:"Trapezoid Body",position:{x:s,y:o},vertices:c.fromPath(g)};if(f.chamfer){var T=f.chamfer;y.vertices=c.chamfer(y.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete f.chamfer}return r.create(h.extend({},y,f))},d.circle=function(s,o,i,a,l){a=a||{};var f={label:"Circle Body",circleRadius:i};l=l||25;var u=Math.ceil(Math.max(10,Math.min(l,i)));return u%2===1&&(u+=1),d.polygon(s,o,u,i,h.extend({},f,a))},d.polygon=function(s,o,i,a,l){if(l=l||{},i<3)return d.circle(s,o,a,l);for(var f=2*Math.PI/i,u="",v=f*.5,m=0;m<i;m+=1){var x=v+m*f,g=Math.cos(x)*a,y=Math.sin(x)*a;u+="L "+g.toFixed(3)+" "+y.toFixed(3)+" "}var T={label:"Polygon Body",position:{x:s,y:o},vertices:c.fromPath(u)};if(l.chamfer){var C=l.chamfer;T.vertices=c.chamfer(T.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete l.chamfer}return r.create(h.extend({},T,l))},d.fromVertices=function(s,o,i,a,l,f,u,v){var m=h.getDecomp(),x,g,y,T,C,E,M,P,A,R,F;for(x=!!(m&&m.quickDecomp),a=a||{},y=[],l=typeof l<"u"?l:!1,f=typeof f<"u"?f:.01,u=typeof u<"u"?u:10,v=typeof v<"u"?v:.01,h.isArray(i[0])||(i=[i]),R=0;R<i.length;R+=1)if(E=i[R],T=c.isConvex(E),C=!T,C&&!x&&h.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),T||!x)T?E=c.clockwiseSort(E):E=c.hull(E),y.push({position:{x:s,y:o},vertices:E});else{var w=E.map(function(V){return[V.x,V.y]});m.makeCCW(w),f!==!1&&m.removeCollinearPoints(w,f),v!==!1&&m.removeDuplicatePoints&&m.removeDuplicatePoints(w,v);var I=m.quickDecomp(w);for(M=0;M<I.length;M++){var U=I[M],N=U.map(function(V){return{x:V[0],y:V[1]}});u>0&&c.area(N)<u||y.push({position:c.centre(N),vertices:N})}}for(M=0;M<y.length;M++)y[M]=r.create(h.extend(y[M],a));if(l){var D=5;for(M=0;M<y.length;M++){var B=y[M];for(P=M+1;P<y.length;P++){var L=y[P];if(n.overlaps(B.bounds,L.bounds)){var G=B.vertices,O=L.vertices;for(A=0;A<B.vertices.length;A++)for(F=0;F<L.vertices.length;F++){var z=e.magnitudeSquared(e.sub(G[(A+1)%G.length],O[F])),X=e.magnitudeSquared(e.sub(G[A],O[(F+1)%O.length]));z<D&&X<D&&(G[A].isInternal=!0,O[F].isInternal=!0)}}}}}return y.length>1?(g=r.create(h.extend({parts:y.slice(0)},a)),r.setPosition(g,{x:s,y:o}),g):y[0]},d.flagCoincidentParts=function(s,o){o===void 0&&(o=5);for(var i=0;i<s.length;i++)for(var a=s[i],l=i+1;l<s.length;l++){var f=s[l];if(n.overlaps(a.bounds,f.bounds))for(var u=a.vertices,v=f.vertices,m=0;m<a.vertices.length;m++)for(var x=0;x<f.vertices.length;x++){var g=e.magnitudeSquared(e.sub(u[(m+1)%u.length],v[x])),y=e.magnitudeSquared(e.sub(u[m],v[(x+1)%v.length]));g<o&&y<o&&(u[m].isInternal=!0,v[x].isInternal=!0)}}return s}})()}),74116:((p,S,t)=>{var d={};p.exports=d;var c=t(69351),h=t(48140),r=t(53402),n=t(22562),e=t(66280);(function(){d.stack=function(s,o,i,a,l,f,u){for(var v=c.create({label:"Stack"}),m=s,x=o,g,y=0,T=0;T<a;T++){for(var C=0,E=0;E<i;E++){var M=u(m,x,E,T,g,y);if(M){var P=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;P>C&&(C=P),n.translate(M,{x:A*.5,y:P*.5}),m=M.bounds.max.x+l,c.addBody(v,M),g=M,y+=1}else m+=l}x+=C+f,m=s}return v},d.chain=function(s,o,i,a,l,f){for(var u=s.bodies,v=1;v<u.length;v++){var m=u[v-1],x=u[v],g=m.bounds.max.y-m.bounds.min.y,y=m.bounds.max.x-m.bounds.min.x,T=x.bounds.max.y-x.bounds.min.y,C=x.bounds.max.x-x.bounds.min.x,E={bodyA:m,pointA:{x:y*o,y:g*i},bodyB:x,pointB:{x:C*a,y:T*l}},M=r.extend(E,f);c.addConstraint(s,h.create(M))}return s.label+=" Chain",s},d.mesh=function(s,o,i,a,l){var f=s.bodies,u,v,m,x,g;for(u=0;u<i;u++){for(v=1;v<o;v++)m=f[v-1+u*o],x=f[v+u*o],c.addConstraint(s,h.create(r.extend({bodyA:m,bodyB:x},l)));if(u>0)for(v=0;v<o;v++)m=f[v+(u-1)*o],x=f[v+u*o],c.addConstraint(s,h.create(r.extend({bodyA:m,bodyB:x},l))),a&&v>0&&(g=f[v-1+(u-1)*o],c.addConstraint(s,h.create(r.extend({bodyA:g,bodyB:x},l)))),a&&v<o-1&&(g=f[v+1+(u-1)*o],c.addConstraint(s,h.create(r.extend({bodyA:g,bodyB:x},l))))}return s.label+=" Mesh",s},d.pyramid=function(s,o,i,a,l,f,u){return d.stack(s,o,i,a,l,f,function(v,m,x,g,y,T){var C=Math.min(a,Math.ceil(i/2)),E=y?y.bounds.max.x-y.bounds.min.x:0;if(!(g>C)){g=C-g;var M=g,P=i-1-g;if(!(x<M||x>P)){T===1&&n.translate(y,{x:(x+(i%2===1?1:-1))*E,y:0});var A=y?x*E:0;return u(s+A+x*l,m,x,g,y,T)}}})},d.newtonsCradle=function(s,o,i,a,l){for(var f=c.create({label:"Newtons Cradle"}),u=0;u<i;u++){var v=1.9,m=e.circle(s+u*(a*v),o+l,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=h.create({pointA:{x:s+u*(a*v),y:o},bodyB:m});c.addBody(f,m),c.addConstraint(f,x)}return f},d.car=function(s,o,i,a,l){var f=n.nextGroup(!0),u=20,v=-i*.5+u,m=i*.5-u,x=0,g=c.create({label:"Car"}),y=e.rectangle(s,o,i,a,{collisionFilter:{group:f},chamfer:{radius:a*.5},density:2e-4}),T=e.circle(s+v,o+x,l,{collisionFilter:{group:f},friction:.8}),C=e.circle(s+m,o+x,l,{collisionFilter:{group:f},friction:.8}),E=h.create({bodyB:y,pointB:{x:v,y:x},bodyA:T,stiffness:1,length:0}),M=h.create({bodyB:y,pointB:{x:m,y:x},bodyA:C,stiffness:1,length:0});return c.addBody(g,y),c.addBody(g,T),c.addBody(g,C),c.addConstraint(g,E),c.addConstraint(g,M),g},d.softBody=function(s,o,i,a,l,f,u,v,m,x){m=r.extend({inertia:1/0},m),x=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var g=d.stack(s,o,i,a,l,f,function(y,T){return e.circle(y,T,v,m)});return d.mesh(g,i,a,u,x),g.label="Soft Body",g}})()}),66615:((p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(53402);(function(){d.fromVertices=function(r){for(var n={},e=0;e<r.length;e++){var s=(e+1)%r.length,o=c.normalise({x:r[s].y-r[e].y,y:r[e].x-r[s].x}),i=o.y===0?1/0:o.x/o.y;i=i.toFixed(3).toString(),n[i]=o}return h.values(n)},d.rotate=function(r,n){if(n!==0)for(var e=Math.cos(n),s=Math.sin(n),o=0;o<r.length;o++){var i=r[o],a;a=i.x*e-i.y*s,i.y=i.x*s+i.y*e,i.x=a}}})()}),15647:(p=>{var S={};p.exports=S,(function(){S.create=function(t){var d={min:{x:0,y:0},max:{x:0,y:0}};return t&&S.update(d,t),d},S.update=function(t,d,c){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var h=0;h<d.length;h++){var r=d[h];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}c&&(c.x>0?t.max.x+=c.x:t.min.x+=c.x,c.y>0?t.max.y+=c.y:t.min.y+=c.y)},S.contains=function(t,d){return d.x>=t.min.x&&d.x<=t.max.x&&d.y>=t.min.y&&d.y<=t.max.y},S.overlaps=function(t,d){return t.min.x<=d.max.x&&t.max.x>=d.min.x&&t.max.y>=d.min.y&&t.min.y<=d.max.y},S.translate=function(t,d){t.min.x+=d.x,t.max.x+=d.x,t.min.y+=d.y,t.max.y+=d.y},S.shift=function(t,d){var c=t.max.x-t.min.x,h=t.max.y-t.min.y;t.min.x=d.x,t.max.x=d.x+c,t.min.y=d.y,t.max.y=d.y+h},S.wrap=function(t,d,c){var h=null,r=null;if(typeof d.min.x<"u"&&typeof d.max.x<"u"&&(t.min.x>d.max.x?h=d.min.x-t.max.x:t.max.x<d.min.x&&(h=d.max.x-t.min.x)),typeof d.min.y<"u"&&typeof d.max.y<"u"&&(t.min.y>d.max.y?r=d.min.y-t.max.y:t.max.y<d.min.y&&(r=d.max.y-t.min.y)),h!==null||r!==null)return{x:h||0,y:r||0}}})()}),74058:((p,S,t)=>{var d={};p.exports=d,t(15647);var c=t(53402);(function(){d.pathToVertices=function(h,r){typeof window<"u"&&!("SVGPathSeg"in window)&&c.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,e,s,o,i,a,l,f,u,v,m=[],x,g,y=0,T=0,C=0;r=r||15;var E=function(P,A,R){var F=R%2===1&&R>1;if(!u||P!=u.x||A!=u.y){u&&F?(x=u.x,g=u.y):(x=0,g=0);var w={x:x+P,y:g+A};(F||!u)&&(u=w),m.push(w),T=x+P,C=g+A}},M=function(P){var A=P.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":T=P.x,C=P.y;break;case"H":T=P.x;break;case"V":C=P.y;break}E(T,C,P.pathSegType)}};for(d._svgPathToAbsolute(h),s=h.getTotalLength(),a=[],n=0;n<h.pathSegList.numberOfItems;n+=1)a.push(h.pathSegList.getItem(n));for(l=a.concat();y<s;){if(v=h.getPathSegAtLength(y),i=a[v],i!=f){for(;l.length&&l[0]!=i;)M(l.shift());f=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=h.getPointAtLength(y),E(o.x,o.y,0);break}y+=r}for(n=0,e=l.length;n<e;++n)M(l[n]);return m},d._svgPathToAbsolute=function(h){for(var r,n,e,s,o,i,a=h.pathSegList,l=0,f=0,u=a.numberOfItems,v=0;v<u;++v){var m=a.getItem(v),x=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(x))"x"in m&&(l=m.x),"y"in m&&(f=m.y);else switch("x1"in m&&(e=l+m.x1),"x2"in m&&(o=l+m.x2),"y1"in m&&(s=f+m.y1),"y2"in m&&(i=f+m.y2),"x"in m&&(l+=m.x),"y"in m&&(f+=m.y),x){case"m":a.replaceItem(h.createSVGPathSegMovetoAbs(l,f),v);break;case"l":a.replaceItem(h.createSVGPathSegLinetoAbs(l,f),v);break;case"h":a.replaceItem(h.createSVGPathSegLinetoHorizontalAbs(l),v);break;case"v":a.replaceItem(h.createSVGPathSegLinetoVerticalAbs(f),v);break;case"c":a.replaceItem(h.createSVGPathSegCurvetoCubicAbs(l,f,e,s,o,i),v);break;case"s":a.replaceItem(h.createSVGPathSegCurvetoCubicSmoothAbs(l,f,o,i),v);break;case"q":a.replaceItem(h.createSVGPathSegCurvetoQuadraticAbs(l,f,e,s),v);break;case"t":a.replaceItem(h.createSVGPathSegCurvetoQuadraticSmoothAbs(l,f),v);break;case"a":a.replaceItem(h.createSVGPathSegArcAbs(l,f,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),v);break;case"z":case"Z":l=r,f=n;break}(x=="M"||x=="m")&&(r=l,n=f)}}})()}),31725:(p=>{var S={};p.exports=S,(function(){S.create=function(t,d){return{x:t||0,y:d||0}},S.clone=function(t){return{x:t.x,y:t.y}},S.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},S.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},S.rotate=function(t,d,c){var h=Math.cos(d),r=Math.sin(d);c||(c={});var n=t.x*h-t.y*r;return c.y=t.x*r+t.y*h,c.x=n,c},S.rotateAbout=function(t,d,c,h){var r=Math.cos(d),n=Math.sin(d);h||(h={});var e=c.x+((t.x-c.x)*r-(t.y-c.y)*n);return h.y=c.y+((t.x-c.x)*n+(t.y-c.y)*r),h.x=e,h},S.normalise=function(t){var d=S.magnitude(t);return d===0?{x:0,y:0}:{x:t.x/d,y:t.y/d}},S.dot=function(t,d){return t.x*d.x+t.y*d.y},S.cross=function(t,d){return t.x*d.y-t.y*d.x},S.cross3=function(t,d,c){return(d.x-t.x)*(c.y-t.y)-(d.y-t.y)*(c.x-t.x)},S.add=function(t,d,c){return c||(c={}),c.x=t.x+d.x,c.y=t.y+d.y,c},S.sub=function(t,d,c){return c||(c={}),c.x=t.x-d.x,c.y=t.y-d.y,c},S.mult=function(t,d){return{x:t.x*d,y:t.y*d}},S.div=function(t,d){return{x:t.x/d,y:t.y/d}},S.perp=function(t,d){return d=d===!0?-1:1,{x:d*-t.y,y:d*t.x}},S.neg=function(t){return{x:-t.x,y:-t.y}},S.angle=function(t,d){return Math.atan2(d.y-t.y,d.x-t.x)},S._temp=[S.create(),S.create(),S.create(),S.create(),S.create(),S.create()]})()}),41598:((p,S,t)=>{var d={};p.exports=d;var c=t(31725),h=t(53402);(function(){d.create=function(r,n){for(var e=[],s=0;s<r.length;s++){var o=r[s],i={x:o.x,y:o.y,index:s,body:n,isInternal:!1};e.push(i)}return e},d.fromPath=function(r,n){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,s=[];return r.replace(e,function(o,i,a){s.push({x:parseFloat(i),y:parseFloat(a)})}),d.create(s,n)},d.centre=function(r){for(var n=d.area(r,!0),e={x:0,y:0},s,o,i,a=0;a<r.length;a++)i=(a+1)%r.length,s=c.cross(r[a],r[i]),o=c.mult(c.add(r[a],r[i]),s),e=c.add(e,o);return c.div(e,6*n)},d.mean=function(r){for(var n={x:0,y:0},e=0;e<r.length;e++)n.x+=r[e].x,n.y+=r[e].y;return c.div(n,r.length)},d.area=function(r,n){for(var e=0,s=r.length-1,o=0;o<r.length;o++)e+=(r[s].x-r[o].x)*(r[s].y+r[o].y),s=o;return n?e/2:Math.abs(e)/2},d.inertia=function(r,n){for(var e=0,s=0,o=r,i,a,l=0;l<o.length;l++)a=(l+1)%o.length,i=Math.abs(c.cross(o[a],o[l])),e+=i*(c.dot(o[a],o[a])+c.dot(o[a],o[l])+c.dot(o[l],o[l])),s+=i;return n/6*(e/s)},d.translate=function(r,n,e){e=typeof e<"u"?e:1;var s=r.length,o=n.x*e,i=n.y*e,a;for(a=0;a<s;a++)r[a].x+=o,r[a].y+=i;return r},d.rotate=function(r,n,e){if(n!==0){var s=Math.cos(n),o=Math.sin(n),i=e.x,a=e.y,l=r.length,f,u,v,m;for(m=0;m<l;m++)f=r[m],u=f.x-i,v=f.y-a,f.x=i+(u*s-v*o),f.y=a+(u*o+v*s);return r}},d.contains=function(r,n){for(var e=n.x,s=n.y,o=r.length,i=r[o-1],a,l=0;l<o;l++){if(a=r[l],(e-i.x)*(a.y-i.y)+(s-i.y)*(i.x-a.x)>0)return!1;i=a}return!0},d.scale=function(r,n,e,s){if(n===1&&e===1)return r;s=s||d.centre(r);for(var o,i,a=0;a<r.length;a++)o=r[a],i=c.sub(o,s),r[a].x=s.x+i.x*n,r[a].y=s.y+i.y*e;return r},d.chamfer=function(r,n,e,s,o){typeof n=="number"?n=[n]:n=n||[8],e=typeof e<"u"?e:-1,s=s||2,o=o||14;for(var i=[],a=0;a<r.length;a++){var l=r[a-1>=0?a-1:r.length-1],f=r[a],u=r[(a+1)%r.length],v=n[a<n.length?a:n.length-1];if(v===0){i.push(f);continue}var m=c.normalise({x:f.y-l.y,y:l.x-f.x}),x=c.normalise({x:u.y-f.y,y:f.x-u.x}),g=Math.sqrt(2*Math.pow(v,2)),y=c.mult(h.clone(m),v),T=c.normalise(c.mult(c.add(m,x),.5)),C=c.sub(f,c.mult(T,g)),E=e;e===-1&&(E=Math.pow(v,.32)*1.75),E=h.clamp(E,s,o),E%2===1&&(E+=1);for(var M=Math.acos(c.dot(m,x)),P=M/E,A=0;A<E;A++)i.push(c.add(c.rotate(y,P*A),C))}return i},d.clockwiseSort=function(r){var n=d.mean(r);return r.sort(function(e,s){return c.angle(n,e)-c.angle(n,s)}),r},d.isConvex=function(r){var n=0,e=r.length,s,o,i,a;if(e<3)return null;for(s=0;s<e;s++)if(o=(s+1)%e,i=(s+2)%e,a=(r[o].x-r[s].x)*(r[i].y-r[o].y),a-=(r[o].y-r[s].y)*(r[i].x-r[o].x),a<0?n|=1:a>0&&(n|=2),n===3)return!1;return n!==0?!0:null},d.hull=function(r){var n=[],e=[],s,o;for(r=r.slice(0),r.sort(function(i,a){var l=i.x-a.x;return l!==0?l:i.y-a.y}),o=0;o<r.length;o+=1){for(s=r[o];e.length>=2&&c.cross3(e[e.length-2],e[e.length-1],s)<=0;)e.pop();e.push(s)}for(o=r.length-1;o>=0;o-=1){for(s=r[o];n.length>=2&&c.cross3(n[n.length-2],n[n.length-1],s)<=0;)n.pop();n.push(s)}return n.pop(),e.pop(),n.concat(e)}})()}),55973:(p=>{/**
 */var d=t(83419),c=t(94811),h=t(95540),r=t(98840),n=t(44667),e=t(61340),s=t(70554),o=t(14500),i=t(29100),a=new d({Extends:i,initialize:function(f){var u=f.game.renderer,v=h(f,"fragShader",r);f.fragShader=s.parseFragmentShaderMaxTextures(v,u.maxTextures),f.vertShader=h(f,"vertShader",n),f.attributes=h(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),f.resizeUniform="uResolution",i.call(this,f),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this);var l=this.renderer;this.set1iv("uMainSampler",l.textureIndexes),this.set2f("uResolution",l.width,l.height)},batchSprite:function(l,f,u){this.manager.set(this,l);var v=this._tempMatrix1,m=this._tempMatrix2,x=this._tempMatrix3,g=l.frame,y=g.glTexture,T=g.u0,C=g.v0,E=g.u1,M=g.v1,P=g.x,A=g.y,R=g.cutWidth,F=g.cutHeight,w=g.customPivot,I=l.displayOriginX,U=l.displayOriginY,N=-I+P,D=-U+A;if(l.isCropped){var B=l._crop;(B.flipX!==l.flipX||B.flipY!==l.flipY)&&g.updateCropUVs(B,l.flipX,l.flipY),T=B.u0,C=B.v0,E=B.u1,M=B.v1,R=B.width,F=B.height,P=B.x,A=B.y,N=-I+P,D=-U+A}var L=1,G=1;l.flipX&&(w||(N+=-g.realWidth+I*2),L=-1),l.flipY&&(w||(D+=-g.realHeight+U*2),G=-1);var O=l.x,z=l.y;f.roundPixels&&(O=Math.floor(O),z=Math.floor(z)),m.applyITRS(O,z,l.rotation,l.scaleX*L,l.scaleY*G),v.copyFrom(f.matrix),u?(v.multiplyWithOffset(u,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),m.e=O,m.f=z):(m.e-=f.scrollX*l.scrollFactorX,m.f-=f.scrollY*l.scrollFactorY),v.multiply(m,x);var X=x.setQuad(N,D,N+R,D+F,f.renderRoundPixels),V=s.getTintAppendFloatAlpha,Y=f.alpha,W=V(l.tintTopLeft,Y*l._alphaTL),H=V(l.tintTopRight,Y*l._alphaTR),K=V(l.tintBottomLeft,Y*l._alphaBL),b=V(l.tintBottomRight,Y*l._alphaBR);this.shouldFlush(6)&&this.flush();var J=this.setGameObject(l,g);this.manager.preBatch(l),this.batchQuad(l,X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],T,C,E,M,W,H,K,b,l.tintFill,y,J),this.manager.postBatch(l)},batchTexture:function(l,f,u,v,m,x,g,y,T,C,E,M,P,A,R,F,w,I,U,N,D,B,L,G,O,z,X,V,Y,W,H,K,b){b===void 0&&(b=!1),this.manager.set(this,l);var J=this._tempMatrix1,$=this._tempMatrix2,Z=this._tempMatrix3,q=I/u+X,_=U/v+V,tt=(I+N)/u+X,Q=(U+D)/v+V,j=g,k=y,et=-F,nt=-w;if(l.isCropped){var lt=l._crop,it=lt.width,st=lt.height;j=it,k=st,g=it,y=st,I=lt.x,U=lt.y;var dt=I,gt=U;M&&(dt=N-lt.x-it),P&&(gt=D-lt.y-st),q=dt/u+X,_=gt/v+V,tt=(dt+it)/u+X,Q=(gt+st)/v+V,et=-F+I,nt=-w+U}P=P^(!H&&f.isRenderTexture?1:0),M&&(j*=-1,et+=g),P&&(k*=-1,nt+=y),Y.roundPixels&&(m=Math.floor(m),x=Math.floor(x)),$.applyITRS(m,x,E,T,C),J.copyFrom(Y.matrix),W?(J.multiplyWithOffset(W,-Y.scrollX*A,-Y.scrollY*R),$.e=m,$.f=x):($.e-=Y.scrollX*A,$.f-=Y.scrollY*R),J.multiply($,Z);var at=Z.setQuad(et,nt,et+j,nt+k,Y.renderRoundPixels);K==null&&(K=this.setTexture2D(f)),l&&!b&&this.manager.preBatch(l),this.batchQuad(l,at[0],at[1],at[2],at[3],at[4],at[5],at[6],at[7],q,_,tt,Q,B,L,G,O,z,f,K),l&&!b&&this.manager.postBatch(l)},batchTextureFrame:function(l,f,u,v,m,x,g){this.manager.set(this);var y=this._tempMatrix1.copyFrom(x),T=this._tempMatrix2;g?y.multiply(g,T):T=y;var C=T.setQuad(f,u,f+l.width,u+l.height),E=this.setTexture2D(l.source.glTexture);v=s.getTintAppendFloatAlpha(v,m),this.batchQuad(null,C[0],C[1],C[2],C[3],C[4],C[5],C[6],C[7],l.u0,l.v0,l.u1,l.v1,v,v,v,v,0,l.glTexture,E)},batchFillRect:function(l,f,u,v,m,x){this.renderer.pipelines.set(this);var g=this.calcMatrix;x&&x.multiply(m,g);var y=g.setQuad(l,f,l+u,f+v),T=this.fillTint;this.batchQuad(null,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],0,0,1,1,T.TL,T.TR,T.BL,T.BR,2)},batchFillTriangle:function(l,f,u,v,m,x,g,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(g,T);var C=T.getX(l,f),E=T.getY(l,f),M=T.getX(u,v),P=T.getY(u,v),A=T.getX(m,x),R=T.getY(m,x),F=this.fillTint;this.batchTri(null,C,E,M,P,A,R,0,0,1,1,F.TL,F.TR,F.BL,2)},batchStrokeTriangle:function(l,f,u,v,m,x,g,y,T){var C=this.tempTriangle;C[0].x=l,C[0].y=f,C[0].width=g,C[1].x=u,C[1].y=v,C[1].width=g,C[2].x=m,C[2].y=x,C[2].width=g,C[3].x=l,C[3].y=f,C[3].width=g,this.batchStrokePath(C,g,!1,y,T)},batchFillPath:function(l,f,u){this.renderer.pipelines.set(this);var v=this.calcMatrix;u&&u.multiply(f,v);for(var m=l.length,x=this.polygonCache,g,y,T=this.fillTint.TL,C=this.fillTint.TR,E=this.fillTint.BL,M=0;M<m;++M)y=l[M],x.push(y.x,y.y);g=c(x),m=g.length;for(var P=0;P<m;P+=3){var A=g[P+0]*2,R=g[P+1]*2,F=g[P+2]*2,w=x[A+0],I=x[A+1],U=x[R+0],N=x[R+1],D=x[F+0],B=x[F+1],L=v.getX(w,I),G=v.getY(w,I),O=v.getX(U,N),z=v.getY(U,N),X=v.getX(D,B),V=v.getY(D,B);this.batchTri(null,L,G,O,z,X,V,0,0,1,1,T,C,E,2)}x.length=0},batchStrokePath:function(l,f,u,v,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=l.length-1,g=0;g<x;g++){var y=l[g],T=l[g+1];this.batchLine(y.x,y.y,T.x,T.y,y.width/2,T.width/2,f,g,!u&&g===x-1,v,m)}},batchLine:function(l,f,u,v,m,x,g,y,T,C,E){this.renderer.pipelines.set(this);var M=this.calcMatrix;E&&E.multiply(C,M);var P=u-l,A=v-f,R=Math.sqrt(P*P+A*A);if(R!==0){var F=m*(v-f)/R,w=m*(l-u)/R,I=x*(v-f)/R,U=x*(l-u)/R,N=u-I,D=v-U,B=l-F,L=f-w,G=u+I,O=v+U,z=l+F,X=f+w,V=M.getX(N,D),Y=M.getY(N,D),W=M.getX(B,L),H=M.getY(B,L),K=M.getX(G,O),b=M.getY(G,O),J=M.getX(z,X),$=M.getY(z,X),Z=this.strokeTint,q=Z.TL,_=Z.TR,tt=Z.BL,Q=Z.BR;if(this.batchQuad(null,J,$,W,H,V,Y,K,b,0,0,1,1,q,_,tt,Q,2),!(g<=2)){var j=this.prevQuad,k=this.firstQuad;y>0&&j[4]?this.batchQuad(null,J,$,W,H,j[0],j[1],j[2],j[3],0,0,1,1,q,_,tt,Q,2):(k[0]=J,k[1]=$,k[2]=W,k[3]=H,k[4]=1),T&&k[4]?this.batchQuad(null,V,Y,K,b,k[0],k[1],k[2],k[3],0,0,1,1,q,_,tt,Q,2):(j[0]=V,j[1]=Y,j[2]=K,j[3]=b,j[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,i.prototype.destroy.call(this),this}});p.exports=a}),43439:((p,S,t)=>{/**
 */p.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}})},mt={};function rt(p){var S=mt[p];if(S!==void 0)return S.exports;var t=mt[p]={exports:{}};return ft[p](t,t.exports,rt),t.exports}rt.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var ct=rt(85454);return ct})())})(Mt)),Mt.exports}var Bt=wt();const yt=Ot(Bt);function It(ot){return`data:image/svg+xml;base64,${btoa(ot)}`}function At(ot,ht,ft,mt,rt){const ct=It(ft);ot.textures.addBase64(ht,ct)}const ut={playerSkin:"#F4D9B0",playerSkinDark:"#D9B178",playerShirt:"#3E95D4",playerShirtDark:"#2E6FA5",playerPants:"#C1A178",playerPantsDark:"#8C6A44",npcRobe:"#9A65C6",npcRobeDark:"#6E4791",floorBase:"#2E2E2E",floorAlt:"#353535",wallBase:"#9B7A53",wallDark:"#6E5236",doorway:"#2A2A2A",chestBase:"#F2C94C",chestDark:"#C99A2B",dialogBg:"#F5F5DC",dialogBorder:"#5D4C3A"};function Gt({variant:ot=0}={}){const ht=[ut.floorBase,ut.floorAlt,ut.playerPants];return`
    <rect width="64" height="64" fill="${ht[ot]||ht[0]}" />
    <rect x="6" y="6" width="52" height="52" fill="#FFFFFF" opacity="0.04" />
    <rect x="12" y="12" width="40" height="40" fill="#000000" opacity="0.08" />
      <rect width="64" height="64" fill="${ut.wallBase}" />
      <rect x="4" y="4" width="56" height="56" fill="${ut.wallDark}" rx="6" />
      <rect x="10" y="10" width="44" height="44" fill="${ut.wallBase}" rx="5" />
      <rect x="18" y="8" width="28" height="48" rx="10" fill="${ut.doorway}" />
    <rect width="64" height="64" fill="${ut.wallBase}" />
    <rect x="4" y="4" width="56" height="56" rx="6" fill="${ut.wallDark}" />
    <rect x="8" y="8" width="48" height="48" rx="5" fill="${ut.wallBase}" />
    <rect x="12" y="12" width="40" height="40" rx="4" fill="${ut.wallDark}" opacity="0.5" />
    <rect x="28" y="4" width="8" height="56" fill="#FFFFFF" opacity="0.06" />
  `.trim()}function Nt({bodyColor:ot=ut.playerShirt,bodyAccent:ht=ut.playerShirtDark,headColor:ft=ut.playerSkin,eyeColor:mt=ut.dialogBorder}={}){return`
    <ellipse cx="16" cy="26" rx="5" ry="2.25" fill="${ut.dialogBorder}" opacity="0.25" />
    <rect x="12" y="12" width="8" height="14" rx="3" fill="${ot}" />
    <rect x="12" y="15" width="8" height="4" rx="2" fill="${ht}" opacity="0.9" />
    <rect x="13.25" y="24" width="5.5" height="2" rx="1" fill="${ht}" opacity="0.8" />
    <circle cx="16" cy="10" r="4" fill="${ft}" />
    <path d="M12 9.5 C13 7.5 14.5 7 16 7 c1.5 0 3 .5 4 2.5 L16 9 Z" fill="${ut.playerSkinDark}" />
    <rect x="13.25" y="10.75" width="5.5" height="1.5" rx="0.75" fill="${mt}" opacity="0.22" />
  `.trim()}function Ut({bodyColor:ot=ut.npcRobe,bodyAccent:ht=ut.npcRobeDark,eyeColor:ft=ut.playerPantsDark}={}){return`
    <ellipse cx="16" cy="26" rx="5" ry="2.25" fill="${ut.dialogBorder}" opacity="0.25" />
    <rect x="10" y="11" width="12" height="16" rx="6" fill="${ot}" />
    <rect x="11" y="15" width="10" height="4" rx="2" fill="${ht}" opacity="0.9" />
    <rect x="12.5" y="23.5" width="7" height="2.5" rx="1.25" fill="${ht}" opacity="0.85" />
    <circle cx="16" cy="9.75" r="3.75" fill="${ut.playerSkin}" />
    <rect x="13.1" y="10.25" width="5.8" height="1.3" rx="0.65" fill="${ft}" opacity="0.22" />
  `.trim()}function Lt({state:ot="closed",baseColor:ht=ut.chestBase,accentColor:ft=ut.chestDark}={}){const mt=ot==="collected"?.65:1;return`
    <rect x="4" y="8" width="24" height="12" rx="3" fill="${ft}" opacity="${mt}" />
    <rect x="3" y="6" width="26" height="8" rx="3" fill="${ht}" opacity="${mt}" />
    <rect x="6" y="10" width="20" height="2" rx="1" fill="${ut.playerPantsDark}" opacity="${mt}" />
    <rect x="14.5" y="8.5" width="3" height="5" rx="1" fill="${ut.dialogBg}" opacity="${mt}" />
  `.trim()}function zt(ot){const ht=ot.add.text(ot.scale.width/2,ot.scale.height-80,"",{fontSize:"18px",color:"#ffffff",backgroundColor:"#000000",padding:{x:8,y:6},align:"center"}).setOrigin(.5).setDepth(10).setVisible(!1);return{show(ft){ht.setText(ft),ht.setVisible(!0)},hide(){ht.setVisible(!1)},isVisible(){return ht.visible}}}function Xt(ot){return ot.add.text(16,16,"Move: WASD/Arrows | Interact: E or Space",{fontSize:"16px",color:"#ffffff"})}class Vt extends yt.Scene{constructor(){super("MainScene"),this.player=null,this.controls=null,this.dialogVisible=!1,this.collected=!1}preload(){this.registerTextures()}create(){this.createRoom(),this.setupInput(),this.createPlayer(),this.createNpc(),this.createChest(),this.createHud(),typeof window<"u"&&(window.__scene=this,window.__phaserReady=!0)}update(){this.updateMovement()}registerTextures(){At(this,"floor-0",Gt({variant:0})),At(this,"wall-solid",Ft({type:"solid"})),At(this,"wall-doorway",Ft({type:"doorway"})),At(this,"player",Nt()),At(this,"npc",Ut()),At(this,"chest",Lt({state:"closed"})),At(this,"chest-collected",Lt({state:"collected"}))}createRoom(){const ft=Math.ceil(this.scale.width/64),mt=Math.ceil(this.scale.height/64);for(let ct=0;ct<mt;ct+=1)for(let p=0;p<ft;p+=1)this.add.image(p*64+64/2,ct*64+64/2,"floor-0");this.walls=this.physics.add.staticGroup();const rt=32;this.walls.create(this.scale.width/2,rt/2,"wall-solid").setDisplaySize(this.scale.width,rt).refreshBody(),this.walls.create(this.scale.width/2,this.scale.height-rt/2,"wall-solid").setDisplaySize(this.scale.width,rt).refreshBody(),this.walls.create(rt/2,this.scale.height/2,"wall-solid").setDisplaySize(rt,this.scale.height).refreshBody(),this.walls.create(this.scale.width-rt/2,this.scale.height/2,"wall-solid").setDisplaySize(rt,this.scale.height).refreshBody()}setupInput(){this.controls=this.input.keyboard.addKeys({up:yt.Input.Keyboard.KeyCodes.W,left:yt.Input.Keyboard.KeyCodes.A,down:yt.Input.Keyboard.KeyCodes.S,right:yt.Input.Keyboard.KeyCodes.D,upArrow:yt.Input.Keyboard.KeyCodes.UP,leftArrow:yt.Input.Keyboard.KeyCodes.LEFT,downArrow:yt.Input.Keyboard.KeyCodes.DOWN,rightArrow:yt.Input.Keyboard.KeyCodes.RIGHT,interact:yt.Input.Keyboard.KeyCodes.E,interactAlt:yt.Input.Keyboard.KeyCodes.SPACE})}createPlayer(){this.playerSprite=this.physics.add.sprite(200,200,"player"),this.playerSprite.setCollideWorldBounds(!0),this.playerSprite.body.setSize(28,28),this.physics.add.collider(this.playerSprite,this.walls)}createNpc(){this.npcSprite=this.physics.add.staticSprite(600,200,"npc"),this.npcSprite.refreshBody(),this.npcZone=this.physics.add.staticImage(600,200,null).setSize(60,60).refreshBody().setVisible(!1)}createChest(){this.chestSprite=this.add.sprite(400,400,"chest"),this.chestZone=this.physics.add.staticImage(400,400,null).setSize(50,50).refreshBody().setVisible(!1)}createHud(){this.hintText=Xt(this),this.dialog=zt(this)}updateMovement(){let ft=0,mt=0;(this.controls.left.isDown||this.controls.leftArrow.isDown)&&(ft-=1),(this.controls.right.isDown||this.controls.rightArrow.isDown)&&(ft+=1),(this.controls.up.isDown||this.controls.upArrow.isDown)&&(mt-=1),(this.controls.down.isDown||this.controls.downArrow.isDown)&&(mt+=1);const rt=yt.Input.Keyboard.JustDown(this.controls.interact)||yt.Input.Keyboard.JustDown(this.controls.interactAlt);if(this.dialogVisible){this.playerSprite.setVelocity(0,0),rt&&this.toggleDialog();return}const ct=Math.hypot(ft,mt)||1;this.playerSprite.setVelocity(ft/ct*180,mt/ct*180),rt&&(this.physics.overlap(this.playerSprite,this.npcZone)?this.toggleDialog("Hello there! Nice day for an adventure."):this.physics.overlap(this.playerSprite,this.chestZone)&&this.handleCollect())}toggleDialog(ht){if(this.dialog.isVisible()){this.dialog.hide(),this.dialogVisible=!1;return}this.dialogVisible=!0,this.dialog.show(ht)}handleCollect(){if(this.collected){this.toggleDialog("Already collected.");return}this.collected=!0,this.chestSprite.setTexture("chest-collected"),this.toggleDialog("You found a thing!")}}const Yt={type:yt.AUTO,width:800,height:600,backgroundColor:"#1a1a1a",pixelArt:!0,parent:"app",physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:[Vt]};new yt.Game(Yt);
